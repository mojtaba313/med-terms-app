
the codes of file with route : /app/categories/page.tsx :
"use client";
import { useState, useEffect, useCallback } from "react";
import { Sidebar } from "../../components/layout/sidebar";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "../../components/ui/card";
import { Button } from "../../components/ui/button";
import { Input } from "../../components/ui/input";
import { AddCategoryDialog } from "../../components/add-category-dialog";
import { EditCategoryDialog } from "../../components/edit-category-dialog";
import { Category } from "../../types";
import { useAuth } from "../../components/auth-provider";
import { motion, AnimatePresence } from "framer-motion";
import { useToast } from "../../hooks/use-toast";

export default function CategoriesPage() {
  const [categories, setCategories] = useState<Category[]>([]);
  const [searchTerm, setSearchTerm] = useState("");
  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState("");
  const [isLoading, setIsLoading] = useState(true);
  const [showAddDialog, setShowAddDialog] = useState(false);
  const [showEditDialog, setShowEditDialog] = useState(false);
  const [editingCategory, setEditingCategory] = useState<Category | null>(null);
  const { user } = useAuth();
  const { toast } = useToast();

  // Debounce search
  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedSearchTerm(searchTerm);
    }, 300);

    return () => clearTimeout(timer);
  }, [searchTerm]);

  useEffect(() => {
    if (user) {
      fetchCategories();
    }
  }, [user]);

  const fetchCategories = useCallback(async () => {
    const controller = new AbortController();
    try {
      const response = await fetch("/api/categories", {
        signal: controller.signal,
      });
      if (response.ok) {
        const data = await response.json();
        setCategories(data.data || []);
      } else {
        throw new Error("Failed to fetch categories");
      }
    } catch (error: any) {
      if (error.name !== 'AbortError') {
        console.error("Error fetching categories:", error);
        toast({
          title: "Ø®Ø·Ø§",
          description: "Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¢Ù…Ø¯",
          variant: "destructive",
        });
      }
    } finally {
      setIsLoading(false);
    }

    return () => controller.abort();
  }, [toast]);

  const filteredCategories = categories.filter(
    (category) =>
      category.name.toLowerCase().includes(debouncedSearchTerm.toLowerCase()) ||
      category.description?.toLowerCase().includes(debouncedSearchTerm.toLowerCase())
  );

  const handleAddCategory = async (categoryData: {
    name: string;
    description?: string;
    color: string;
  }) => {
    try {
      const response = await fetch("/api/categories", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(categoryData),
      });

      if (response.ok) {
        const result = await response.json();
        setCategories((prev) => [result.data, ...prev]);
        setShowAddDialog(false);
        toast({
          title: "Ù…ÙˆÙÙ‚",
          description: "Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯",
        });
      } else {
        const errorData = await response.json();
        throw new Error(errorData.error || "Failed to add category");
      }
    } catch (error: any) {
      console.error("Error adding category:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ",
        variant: "destructive",
      });
    }
  };

  const handleEditCategory = async (categoryData: {
    name: string;
    description?: string;
    color: string;
  }) => {
    if (!editingCategory) return;

    try {
      const response = await fetch(`/api/categories/${editingCategory.id}`, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(categoryData),
      });

      if (response.ok) {
        const result = await response.json();
        setCategories((prev) =>
          prev?.map((cat) => (cat.id === editingCategory.id ? result.data : cat))
        );
        setShowEditDialog(false);
        setEditingCategory(null);
        toast({
          title: "Ù…ÙˆÙÙ‚",
          description: "Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯",
        });
      } else {
        const errorData = await response.json();
        throw new Error(errorData.error || "Failed to update category");
      }
    } catch (error: any) {
      console.error("Error updating category:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ",
        variant: "destructive",
      });
    }
  };

  const handleDeleteCategory = async (categoryId: string) => {
    if (!confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ")) return;

    try {
      const response = await fetch(`/api/categories/${categoryId}`, {
        method: "DELETE",
      });

      if (response.ok) {
        setCategories((prev) => prev.filter((cat) => cat.id !== categoryId));
        toast({
          title: "Ù…ÙˆÙÙ‚",
          description: "Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯",
        });
      } else {
        const errorData = await response.json();
        throw new Error(errorData.error || "Failed to delete category");
      }
    } catch (error: any) {
      console.error("Error deleting category:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ",
        variant: "destructive",
      });
    }
  };

  const openEditDialog = (category: Category) => {
    setEditingCategory(category);
    setShowEditDialog(true);
  };

  if (isLoading) {
    return (
      <div className="flex min-h-screen bg-background">
        <Sidebar />
        <main className="flex-1 overflow-y-auto p-4 md:p-8">
          <div className="space-y-6">
            <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
              <div className="space-y-2">
                <div className="h-8 w-48 bg-gray-200 rounded animate-pulse"></div>
                <div className="h-4 w-64 bg-gray-200 rounded animate-pulse"></div>
              </div>
              <div className="h-10 w-40 bg-gray-200 rounded animate-pulse"></div>
            </div>
            <div className="h-20 bg-gray-200 rounded animate-pulse"></div>
            <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
              {[...Array(6)]?.map((_, i) => (
                <div key={i} className="h-32 bg-gray-200 rounded animate-pulse"></div>
              ))}
            </div>
          </div>
        </main>
      </div>
    );
  }

  return (
    <div className="flex min-h-screen bg-background">
      <Sidebar />
      <main className="flex-1 overflow-y-auto p-4 md:p-8">
        <div className="space-y-6">
          <motion.div 
            className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"
            initial={{ opacity: 0, y: -20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
          >
            <div>
              <h1 className="text-2xl md:text-3xl font-bold tracking-tight">
                ğŸ·ï¸ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
              </h1>
              <p className="text-muted-foreground text-sm md:text-base">
                Ø³Ø§Ø²Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ùˆ Ø¹Ø¨Ø§Ø±Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ Ø¨Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
              </p>
            </div>
            <Button
              onClick={() => setShowAddDialog(true)}
              className="bg-blue-600 hover:bg-blue-700 w-full sm:w-auto shadow-lg transition-all duration-300 hover:scale-105"
            >
              â• Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯
            </Button>
          </motion.div>

          {/* Search */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5, delay: 0.1 }}
          >
            <Card className="shadow-md border-0 bg-linear-to-r from-blue-50 to-indigo-50">
              <CardContent className="p-4 md:p-6">
                <Input
                  placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="w-full text-right"
                />
              </CardContent>
            </Card>
          </motion.div>

          {/* Categories Grid */}
          <motion.div 
            className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"
            layout
          >
            <AnimatePresence>
              {filteredCategories?.map((category, index) => (
                <motion.div
                  key={category.id}
                  initial={{ opacity: 0, scale: 0.9 }}
                  animate={{ opacity: 1, scale: 1 }}
                  exit={{ opacity: 0, scale: 0.9 }}
                  transition={{ duration: 0.3, delay: Math.min(index * 0.05, 0.5) }}
                  layout
                >
                  <Card
                    className="hover:shadow-xl transition-all duration-300 border-0 bg-white shadow-sm hover:border-blue-200 cursor-pointer group relative"
                    style={{ 
                      borderRight: `4px solid ${category.color}`,
                      borderLeft: 'none'
                    }}
                  >
                    <CardHeader className="pb-3">
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-3">
                          <div
                            className="w-5 h-5 rounded-full shadow-sm group-hover:scale-110 transition-transform duration-300"
                            style={{ backgroundColor: category.color }}
                          ></div>
                          <CardTitle className="text-lg font-bold text-gray-800">
                            {category.name}
                          </CardTitle>
                        </div>
                        <div className="flex gap-1">
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={(e) => {
                              e.stopPropagation();
                              openEditDialog(category);
                            }}
                            className="h-8 w-8 p-0 hover:bg-blue-50"
                          >
                            âœï¸
                          </Button>
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={(e) => {
                              e.stopPropagation();
                              handleDeleteCategory(category.id);
                            }}
                            className="h-8 w-8 p-0 hover:bg-red-50"
                          >
                            ğŸ—‘ï¸
                          </Button>
                        </div>
                      </div>
                      {category.description && (
                        <CardDescription className="text-right text-gray-600 mt-2 line-clamp-2">
                          {category.description}
                        </CardDescription>
                      )}
                    </CardHeader>
                    <CardContent>
                      <div className="text-xs text-muted-foreground text-left">
                        Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡: {new Date(category.createdAt).toLocaleDateString('fa-IR')}
                      </div>
                    </CardContent>
                  </Card>
                </motion.div>
              ))}
            </AnimatePresence>
          </motion.div>

          {filteredCategories?.length === 0 && !isLoading && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              transition={{ duration: 0.5 }}
            >
              <Card className="text-center py-12 border-0 shadow-lg bg-linear-to-br from-gray-50 to-blue-50">
                <CardContent>
                  <div className="text-6xl mb-4">ğŸ·ï¸</div>
                  <h3 className="text-lg font-semibold mb-2">Ù‡ÛŒÚ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h3>
                  <p className="text-muted-foreground mb-4">
                    {categories?.length === 0
                      ? "Ø¨Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯"
                      : "Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø®ÙˆØ¯ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯"}
                  </p>
                  {categories?.length === 0 && (
                    <Button
                      onClick={() => setShowAddDialog(true)}
                      className="bg-blue-600 hover:bg-blue-700 shadow-lg"
                    >
                      Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
                    </Button>
                  )}
                </CardContent>
              </Card>
            </motion.div>
          )}
        </div>

        {showAddDialog && (
          <AddCategoryDialog
            onClose={() => setShowAddDialog(false)}
            onAdd={handleAddCategory}
          />
        )}

        {showEditDialog && editingCategory && (
          <EditCategoryDialog
            category={editingCategory}
            onClose={() => {
              setShowEditDialog(false);
              setEditingCategory(null);
            }}
            onSave={handleEditCategory}
          />
        )}
      </main>
    </div>
  );
}
-----

the codes of file with route : /app/flashcards/page.tsx :
"use client";
import { useState, useEffect, useCallback, useRef } from "react";
import { Sidebar } from "../../components/layout/sidebar";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "../../components/ui/card";
import { Button } from "../../components/ui/button";
import { Input } from "../../components/ui/input";
import { MedicalTerm, MedicalPhrase, Category } from "../../types";
import { useToast } from "../../hooks/use-toast";
import { motion, AnimatePresence } from "framer-motion";

type FlashcardItem = {
  id: string;
  type: "term" | "phrase";
  front: string;
  back: string;
  pronunciation?: string;
  categories: Category[];
};

type StudySession = {
  id: string;
  allCards: FlashcardItem[];
  remainingCards: FlashcardItem[];
  correctCards: FlashcardItem[];
  currentCard: FlashcardItem | null;
  showAnswer: boolean;
  isTransitioning: boolean;
  correctCount: number;
  totalReviews: number;
};

export default function FlashcardsPage() {
  const [allFlashcards, setAllFlashcards] = useState<FlashcardItem[]>([]);
  const [filteredFlashcards, setFilteredFlashcards] = useState<FlashcardItem[]>(
    []
  );
  const [basketCards, setBasketCards] = useState<FlashcardItem[]>([]);
  const [studySession, setStudySession] = useState<StudySession | null>(null);
  const [categories, setCategories] = useState<Category[]>([]);
  const [activeTab, setActiveTab] = useState<"browse" | "basket">("browse");
  const { toast } = useToast();

  // Filter states
  const [searchTerm, setSearchTerm] = useState("");
  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState("");
  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);

  const studySessionRef = useRef<StudySession | null>(null);
  studySessionRef.current = studySession;

  // Debounce search
  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedSearchTerm(searchTerm);
    }, 300);

    return () => clearTimeout(timer);
  }, [searchTerm]);

  useEffect(() => {
    fetchData();
    loadBasketFromStorage();
  }, []);

  useEffect(() => {
    filterFlashcards();
  }, [allFlashcards, debouncedSearchTerm, selectedCategories]);

  useEffect(() => {
    saveBasketToStorage();
  }, [basketCards]);

  const loadBasketFromStorage = useCallback(() => {
    try {
      const savedBasket = localStorage.getItem("flashcard-basket");
      if (savedBasket) {
        const parsed = JSON.parse(savedBasket);
        if (Array.isArray(parsed)) {
          setBasketCards(parsed);
        }
      }
    } catch (error) {
      console.error("Error loading basket from storage:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ± Ù…Ø´Ú©Ù„ Ù¾ÛŒØ´ Ø¢Ù…Ø¯",
        variant: "destructive",
      });
    }
  }, [toast]);

  const saveBasketToStorage = useCallback(() => {
    try {
      localStorage.setItem("flashcard-basket", JSON.stringify(basketCards));
    } catch (error) {
      console.error("Error saving basket to storage:", error);
    }
  }, [basketCards]);

  const fetchData = useCallback(async () => {
    const controller = new AbortController();

    try {
      const [termsRes, phrasesRes, categoriesRes] = await Promise.all([
        fetch("/api/terms", { signal: controller.signal }),
        fetch("/api/phrases", { signal: controller.signal }),
        fetch("/api/categories", { signal: controller.signal }),
      ]);

      const flashcardsData: FlashcardItem[] = [];

      if (termsRes.ok) {
        const termsData = await termsRes.json();
        const terms = termsData.data || [];
        terms.forEach((term: MedicalTerm) => {
          flashcardsData.push({
            id: `term-${term.id}`,
            type: "term",
            front: term.term,
            back: term.meaning,
            pronunciation: term.pronunciation,
            categories: term.categories,
          });
        });
      }

      if (phrasesRes.ok) {
        const phrasesData = await phrasesRes.json();
        const phrases = phrasesData.data || [];
        phrases.forEach((phrase: MedicalPhrase) => {
          flashcardsData.push({
            id: `phrase-${phrase.id}`,
            type: "phrase",
            front: phrase.phrase,
            back: phrase.explanation,
            categories: phrase.categories,
          });
        });
      }

      if (categoriesRes.ok) {
        const categoriesData = await categoriesRes.json();
        setCategories(categoriesData.data || []);
      }

      setAllFlashcards(flashcardsData);
    } catch (error: any) {
      if (error.name !== "AbortError") {
        console.error("Error fetching data:", error);
        toast({
          title: "Ø®Ø·Ø§",
          description: "Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø´Ú©Ù„ Ù¾ÛŒØ´ Ø¢Ù…Ø¯",
          variant: "destructive",
        });
      }
    }

    return () => controller.abort();
  }, [toast]);

  const filterFlashcards = useCallback(() => {
    let filtered = allFlashcards;

    // Search filter
    if (debouncedSearchTerm) {
      filtered = filtered.filter(
        (card) =>
          card.front
            .toLowerCase()
            .includes(debouncedSearchTerm.toLowerCase()) ||
          card.back.toLowerCase().includes(debouncedSearchTerm.toLowerCase())
      );
    }

    // Category filter
    if (selectedCategories?.length > 0) {
      filtered = filtered.filter((card) =>
        card.categories.some((cat) => selectedCategories.includes(cat.id))
      );
    }

    setFilteredFlashcards(filtered);
  }, [allFlashcards, debouncedSearchTerm, selectedCategories]);

  // Text-to-speech function
  const speakText = (text: string) => {
    if ("speechSynthesis" in window) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "en-US";
      utterance.rate = 0.8;
      speechSynthesis.speak(utterance);
    } else {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Ù‚Ø§Ø¨Ù„ÛŒØª Ù¾Ø®Ø´ ØµØ¯Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯",
        variant: "destructive",
      });
    }
  };

  // Basket functions
  const addToBasket = (card: FlashcardItem) => {
    if (!basketCards.find((c) => c.id === card.id)) {
      setBasketCards((prev) => [...prev, card]);
      toast({
        title: "Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯",
        description: "Ú©Ø§Ø±Øª Ø¨Ù‡ Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ± Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯",
      });
    }
  };

  const removeFromBasket = (cardId: string) => {
    setBasketCards((prev) => prev.filter((card) => card.id !== cardId));
    toast({
      title: "Ø­Ø°Ù Ø´Ø¯",
      description: "Ú©Ø§Ø±Øª Ø§Ø² Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ± Ø­Ø°Ù Ø´Ø¯",
    });
  };

  const addAllToBasket = () => {
    const newCards = filteredFlashcards.filter(
      (card) => !basketCards.find((basketCard) => basketCard.id === card.id)
    );
    if (newCards?.length > 0) {
      setBasketCards((prev) => [...prev, ...newCards]);
      toast({
        title: "Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯",
        description: `${newCards?.length} Ú©Ø§Ø±Øª Ø¨Ù‡ Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ± Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`,
      });
    }
  };

  const clearBasket = () => {
    setBasketCards([]);
    toast({
      title: "Ù¾Ø§Ú© Ø´Ø¯",
      description: "Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ± Ø®Ø§Ù„ÛŒ Ø´Ø¯",
    });
  };

  const isInBasket = (cardId: string) => {
    return basketCards.some((card) => card.id === cardId);
  };

  const startStudySession = (cards: FlashcardItem[]) => {
    if (cards?.length === 0) {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ± Ø®Ø§Ù„ÛŒ Ø§Ø³Øª",
        variant: "destructive",
      });
      return;
    }

    const shuffledCards = [...cards].sort(() => Math.random() - 0.5);

    const session: StudySession = {
      id: Date.now().toString(),
      allCards: shuffledCards,
      remainingCards: [...shuffledCards],
      correctCards: [],
      currentCard: shuffledCards[0],
      showAnswer: false,
      isTransitioning: false,
      correctCount: 0,
      totalReviews: 0,
    };

    setStudySession(session);
  };

  const handleShowAnswer = () => {
    if (!studySessionRef.current) return;

    setStudySession({
      ...studySessionRef.current,
      showAnswer: true,
    });
  };

  const handleAnswer = (knewAnswer: boolean) => {
    if (!studySessionRef.current || !studySessionRef.current.currentCard)
      return;

    const currentSession = studySessionRef.current;
    const currentCard = currentSession.currentCard;

    let newRemainingCards = [...currentSession.remainingCards];
    let newCorrectCards = [...currentSession.correctCards];

    // Remove current card from remaining cards
    newRemainingCards = newRemainingCards.filter(
      (card) => card.id !== currentCard?.id
    );

    if (knewAnswer) {
      if (currentCard) newCorrectCards.push(currentCard);
    } else {
      if (currentCard) newRemainingCards.push(currentCard);
    }

    // Start transition
    setStudySession({
      ...currentSession,
      isTransitioning: true,
      showAnswer: true,
      correctCount: knewAnswer
        ? currentSession.correctCount + 1
        : currentSession.correctCount,
      totalReviews: currentSession.totalReviews + 1,
    });

    // Move to next card after showing answer
    setTimeout(() => {
      const nextCard =
        newRemainingCards?.length > 0 ? newRemainingCards[0] : null;

      setStudySession((current) => {
        if (!current) return null;

        return {
          ...current,
          remainingCards: newRemainingCards,
          correctCards: newCorrectCards,
          currentCard: nextCard,
          isTransitioning: false,
          showAnswer: false,
        };
      });
    }, 1500);
  };

  const endStudySession = () => {
    setStudySession(null);
  };

  const getSessionProgress = () => {
    if (!studySession) return 0;
    const total = studySession.allCards?.length;
    const completed = total - studySession.remainingCards?.length;
    return (completed / total) * 100;
  };

  const getSessionStatus = () => {
    if (!studySession) return "";

    if (studySession.remainingCards?.length === 0) {
      return "ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡! ğŸ‰";
    }

    const round =
      studySession.allCards?.length - studySession.remainingCards?.length + 1;
    return `Ø¯ÙˆØ± ${round} Ø§Ø² ${studySession.allCards?.length}`;
  };

  // Keyboard shortcuts
  useEffect(() => {
    if (!studySession) return;

    const handleKeyPress = (e: KeyboardEvent) => {
      if (e.code === "Space" || e.code === "Enter") {
        e.preventDefault();
        if (!studySession.showAnswer) {
          handleShowAnswer();
        }
      } else if (e.code === "ArrowLeft") {
        e.preventDefault();
        if (studySession.showAnswer && !studySession.isTransitioning) {
          handleAnswer(false);
        }
      } else if (e.code === "ArrowRight") {
        e.preventDefault();
        if (studySession.showAnswer && !studySession.isTransitioning) {
          handleAnswer(true);
        }
      }
    };

    window.addEventListener("keydown", handleKeyPress);
    return () => window.removeEventListener("keydown", handleKeyPress);
  }, [studySession]);

  if (studySession) {
    const progress = getSessionProgress();
    const sessionStatus = getSessionStatus();

    return (
      <div className="flex min-h-screen bg-background">
        <Sidebar />
        <main className="flex-1 overflow-y-auto p-4 md:p-8">
          <div className="max-w-4xl mx-auto space-y-6">
            {/* Header */}
            <div className="flex justify-between items-center">
              <Button onClick={endStudySession} variant="outline" size="sm">
                â† Ø¨Ø§Ø²Ú¯Ø´Øª
              </Button>
              <div className="text-center">
                <h2 className="text-lg font-semibold">{sessionStatus}</h2>
                <p className="text-sm text-muted-foreground">
                  {studySession.correctCount} Ø§Ø² {studySession.totalReviews}{" "}
                  ØµØ­ÛŒØ­
                </p>
              </div>
              <div className="w-20"></div>
            </div>

            {/* Progress Bar */}
            <div className="bg-gray-200 rounded-full h-3">
              <div
                className="bg-blue-600 h-3 rounded-full transition-all duration-500"
                style={{ width: `${progress}%` }}
              />
            </div>

            {/* Stats */}
            <div className="grid grid-cols-3 gap-4 text-center">
              <Card>
                <CardContent className="p-3">
                  <div className="text-xl font-bold text-blue-600">
                    {studySession.allCards?.length}
                  </div>
                  <div className="text-xs text-muted-foreground">
                    Ú©Ù„ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
                  </div>
                </CardContent>
              </Card>
              <Card>
                <CardContent className="p-3">
                  <div className="text-xl font-bold text-green-600">
                    {studySession.correctCards?.length}
                  </div>
                  <div className="text-xs text-muted-foreground">Ù…Ø³Ù„Ø· Ø´Ø¯Ù‡</div>
                </CardContent>
              </Card>
              <Card>
                <CardContent className="p-3">
                  <div className="text-xl font-bold text-orange-600">
                    {studySession.remainingCards?.length}
                  </div>
                  <div className="text-xs text-muted-foreground">
                    Ù…Ø§Ù†Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø±ÙˆØ±
                  </div>
                </CardContent>
              </Card>
            </div>

            {/* Flashcard */}
            {studySession.currentCard ? (
              <div
                className={`transition-all duration-500 ${
                  studySession.isTransitioning
                    ? "opacity-70 scale-95"
                    : "opacity-100 scale-100"
                }`}
              >
                <Card
                  className={`border-2 ${
                    studySession.showAnswer
                      ? "border-green-300 bg-linear-to-br from-green-50 to-green-100"
                      : "border-blue-300 bg-linear-to-br from-blue-50 to-blue-100"
                  } shadow-lg`}
                >
                  <CardContent className="p-8">
                    {/* Card Header */}
                    <div className="flex items-center justify-between mb-6">
                      <div className="flex items-center gap-2">
                        <span className="text-2xl">
                          {studySession.currentCard.type === "term"
                            ? "ğŸ“–"
                            : "ğŸ’¬"}
                        </span>
                        <span className="text-sm text-muted-foreground">
                          {studySession.currentCard.type === "term"
                            ? "Ø§ØµØ·Ù„Ø§Ø­ Ù¾Ø²Ø´Ú©ÛŒ"
                            : "Ø¹Ø¨Ø§Ø±Øª Ù¾Ø²Ø´Ú©ÛŒ"}
                        </span>
                      </div>
                      <div className="text-sm text-muted-foreground">
                        {studySession.allCards?.length -
                          studySession.remainingCards?.length +
                          1}{" "}
                        / {studySession.allCards?.length}
                      </div>
                    </div>

                    {/* Question */}
                    {!studySession.showAnswer && (
                      <div className="text-center space-y-6">
                        <div className="flex items-center justify-center gap-3">
                          <h2 className="text-3xl md:text-4xl font-bold text-gray-800 leading-tight">
                            {studySession.currentCard.front}
                          </h2>
                          {studySession.currentCard.pronunciation && (
                            <Button
                              variant="ghost"
                              size="sm"
                              onClick={() =>
                                speakText(studySession.currentCard!.front)
                              }
                              className="p-2 hover:bg-blue-100 rounded-full"
                            >
                              ğŸ”Š
                            </Button>
                          )}
                        </div>
                        {studySession.currentCard.pronunciation && (
                          <p className="text-xl text-blue-600 font-medium">
                            {studySession.currentCard.pronunciation}
                          </p>
                        )}
                        <div className="space-y-3">
                          <Button
                            onClick={handleShowAnswer}
                            className="bg-blue-600 hover:bg-blue-700 px-8 py-3 text-lg"
                            size="lg"
                          >
                            Ù†Ù…Ø§ÛŒØ´ Ù¾Ø§Ø³Ø® (Space)
                          </Button>
                          <p className="text-sm text-muted-foreground">
                            Ø§Ø² Ú©Ù„ÛŒØ¯ Space ÛŒØ§ Enter Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
                          </p>
                        </div>
                      </div>
                    )}

                    {/* Answer */}
                    {studySession.showAnswer && (
                      <div className="text-center space-y-6 animate-fade-in">
                        <div className="space-y-4">
                          <div className="flex items-center justify-center gap-3">
                            <h2 className="text-3xl md:text-4xl font-bold text-gray-800 leading-tight">
                              {studySession.currentCard.front}
                            </h2>
                            <Button
                              variant="ghost"
                              size="sm"
                              onClick={() =>
                                speakText(studySession.currentCard!.front)
                              }
                              className="p-2 hover:bg-blue-100 rounded-full"
                            >
                              ğŸ”Š
                            </Button>
                          </div>
                          <div className="border-t border-gray-300 pt-4">
                            <h3 className="text-2xl md:text-3xl font-bold text-green-700 leading-tight">
                              {studySession.currentCard.back}
                            </h3>
                          </div>
                        </div>

                        {studySession.currentCard.pronunciation && (
                          <p className="text-xl text-blue-600 font-medium">
                            {studySession.currentCard.pronunciation}
                          </p>
                        )}

                        {/* Categories */}
                        <div className="flex flex-wrap gap-2 justify-center">
                          {studySession.currentCard.categories?.map(
                            (category) => (
                              <span
                                key={category.id}
                                className="px-3 py-1 text-sm rounded-full text-white font-medium shadow-sm"
                                style={{ backgroundColor: category.color }}
                              >
                                {category.name}
                              </span>
                            )
                          )}
                        </div>

                        {/* Answer Buttons */}
                        {!studySession.isTransitioning ? (
                          <div className="flex gap-4 justify-center pt-4">
                            <Button
                              onClick={() => handleAnswer(false)}
                              className="bg-red-600 hover:bg-red-700 px-6 py-3 text-lg min-w-32 shadow-lg"
                              size="lg"
                            >
                              âŒ Ø¨Ù„Ø¯ Ù†Ø¨ÙˆØ¯Ù… (â†)
                            </Button>
                            <Button
                              onClick={() => handleAnswer(true)}
                              className="bg-green-600 hover:bg-green-700 px-6 py-3 text-lg min-w-32 shadow-lg"
                              size="lg"
                            >
                              âœ… Ø¨Ù„Ø¯ Ø¨ÙˆØ¯Ù… (â†’)
                            </Button>
                          </div>
                        ) : (
                          <div className="pt-4">
                            <div className="text-lg font-semibold text-green-700 animate-pulse">
                              Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ Ú©Ø§Ø±Øª Ø¨Ø¹Ø¯ÛŒ...
                            </div>
                          </div>
                        )}
                      </div>
                    )}
                  </CardContent>
                </Card>
              </div>
            ) : (
              // Session Completed
              <Card className="text-center py-12 border-2 border-green-300 bg-linear-to-br from-green-50 to-green-100">
                <CardContent>
                  <div className="text-6xl mb-4">ğŸ‰</div>
                  <h2 className="text-2xl font-bold mb-2">
                    ØªØ¨Ø±ÛŒÚ©! Ù…Ø±ÙˆØ± ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯
                  </h2>
                  <p className="text-muted-foreground mb-6">
                    Ø´Ù…Ø§ ØªÙ…Ø§Ù… Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù…Ø±ÙˆØ± Ú©Ø±Ø¯ÛŒØ¯
                  </p>
                  <div className="grid grid-cols-2 gap-4 max-w-xs mx-auto mb-6">
                    <div className="bg-green-50 p-4 rounded-lg border border-green-200">
                      <div className="text-2xl font-bold text-green-600">
                        {studySession.correctCount}
                      </div>
                      <div className="text-sm text-green-700">Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­</div>
                    </div>
                    <div className="bg-blue-50 p-4 rounded-lg border border-blue-200">
                      <div className="text-2xl font-bold text-blue-600">
                        {studySession.totalReviews}
                      </div>
                      <div className="text-sm text-blue-700">ØªØ¹Ø¯Ø§Ø¯ Ù…Ø±ÙˆØ±</div>
                    </div>
                  </div>
                  <Button
                    onClick={endStudySession}
                    className="bg-blue-600 hover:bg-blue-700 px-8 shadow-lg"
                    size="lg"
                  >
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ±
                  </Button>
                </CardContent>
              </Card>
            )}
          </div>
        </main>
      </div>
    );
  }

  return (
    <div className="flex min-h-screen bg-background">
      <Sidebar />
      <main className="flex-1 overflow-y-auto p-4 md:p-8">
        <div className="space-y-6">
          {/* Header with Basket Info */}
          <motion.div
            className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"
            initial={{ opacity: 0, y: -20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
          >
            <div>
              <h1 className="text-2xl md:text-3xl font-bold tracking-tight">
                ÙÙ„Ø´ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
              </h1>
              <p className="text-muted-foreground text-sm md:text-base">
                Ø³ÛŒØ³ØªÙ… Ù…Ø±ÙˆØ± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ±
              </p>
            </div>

            <div className="flex gap-2">
              {/* Basket Info */}
              {basketCards?.length > 0 && (
                <motion.div
                  className="flex items-center gap-2 bg-orange-100 text-orange-800 px-3 py-2 rounded-lg"
                  initial={{ opacity: 0, scale: 0.9 }}
                  animate={{ opacity: 1, scale: 1 }}
                >
                  <span className="text-lg">ğŸ›’</span>
                  <span className="font-medium">
                    {basketCards?.length} Ú©Ø§Ø±Øª Ø¯Ø± Ø³Ø¨Ø¯
                  </span>
                  <Button
                    onClick={() => startStudySession(basketCards)}
                    className="bg-orange-600 hover:bg-orange-700 text-white h-8 px-3 text-sm"
                  >
                    Ø´Ø±ÙˆØ¹ Ù…Ø±ÙˆØ±
                  </Button>
                  <Button
                    onClick={clearBasket}
                    variant="ghost"
                    size="sm"
                    className="h-8 w-8 p-0 hover:bg-orange-200"
                  >
                    ğŸ—‘ï¸
                  </Button>
                </motion.div>
              )}
            </div>
          </motion.div>

          {/* Tabs */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5, delay: 0.1 }}
          >
            <div className="flex border-b">
              <button
                className={`px-4 py-2 font-medium transition-colors ${
                  activeTab === "browse"
                    ? "border-b-2 border-blue-600 text-blue-600"
                    : "text-muted-foreground hover:text-foreground"
                }`}
                onClick={() => setActiveTab("browse")}
              >
                Ù…Ø±ÙˆØ± Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
              </button>
              <button
                className={`px-4 py-2 font-medium transition-colors ${
                  activeTab === "basket"
                    ? "border-b-2 border-orange-600 text-orange-600"
                    : "text-muted-foreground hover:text-foreground"
                }`}
                onClick={() => setActiveTab("basket")}
              >
                Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ± ({basketCards?.length})
              </button>
            </div>
          </motion.div>

          {/* Filter Section */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5, delay: 0.2 }}
          >
            <Card className="shadow-md border-0 bg-linear-to-r from-blue-50 to-indigo-50">
              <CardContent className="p-4 md:p-6">
                <div className="space-y-4">
                  {/* Search Input */}
                  <div>
                    <Input
                      placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± ÙÙ„Ø´ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§..."
                      value={searchTerm}
                      onChange={(e) => setSearchTerm(e.target.value)}
                      className="w-full text-right"
                    />
                  </div>

                  {/* Category Filter */}
                  <div>
                    <label className="block text-sm font-medium mb-2 text-right">
                      ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:
                    </label>
                    <div className="flex flex-wrap gap-2">
                      {categories?.map((category) => (
                        <button
                          key={category.id}
                          onClick={() => {
                            setSelectedCategories((prev) =>
                              prev.includes(category.id)
                                ? prev.filter((id) => id !== category.id)
                                : [...prev, category.id]
                            );
                          }}
                          className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${
                            selectedCategories.includes(category.id)
                              ? "text-white shadow-md"
                              : "bg-white text-gray-700 hover:bg-gray-50 border"
                          }`}
                          style={{
                            backgroundColor: selectedCategories.includes(
                              category.id
                            )
                              ? category.color
                              : undefined,
                            borderColor: selectedCategories.includes(
                              category.id
                            )
                              ? category.color
                              : "#e5e7eb",
                          }}
                        >
                          {category.name}
                        </button>
                      ))}
                    </div>
                  </div>

                  {/* Action Buttons */}
                  <div className="flex gap-2 pt-2">
                    <Button
                      onClick={addAllToBasket}
                      disabled={filteredFlashcards?.length === 0}
                      className="bg-green-600 hover:bg-green-700 disabled:opacity-50"
                    >
                      â• Ø§ÙØ²ÙˆØ¯Ù† Ù‡Ù…Ù‡ Ø¨Ù‡ Ø³Ø¨Ø¯
                    </Button>
                    <Button
                      onClick={() => setSelectedCategories([])}
                      variant="outline"
                    >
                      Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„ØªØ±Ù‡Ø§
                    </Button>
                  </div>
                </div>
              </CardContent>
            </Card>
          </motion.div>

          {/* Cards Grid */}
          <motion.div
            className="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"
            layout
          >
            <AnimatePresence>
              {(activeTab === "browse" ? filteredFlashcards : basketCards)?.map(
                (card, index) => (
                  <motion.div
                    key={card.id}
                    initial={{ opacity: 0, scale: 0.9 }}
                    animate={{ opacity: 1, scale: 1 }}
                    exit={{ opacity: 0, scale: 0.9 }}
                    transition={{
                      duration: 0.3,
                      delay: Math.min(index * 0.05, 0.5),
                    }}
                    layout
                  >
                    <Card className="hover:shadow-lg transition-all duration-300 border-0 bg-white shadow-sm group">
                      <CardHeader className="pb-3">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center gap-2">
                            <span className="text-lg">
                              {card.type === "term" ? "ğŸ“–" : "ğŸ’¬"}
                            </span>
                            <span className="text-xs text-muted-foreground">
                              {card.type === "term" ? "Ø§ØµØ·Ù„Ø§Ø­" : "Ø¹Ø¨Ø§Ø±Øª"}
                            </span>
                          </div>
                          <div className="flex gap-1">
                            {card.pronunciation && (
                              <Button
                                variant="ghost"
                                size="sm"
                                onClick={() => speakText(card.front)}
                                className="h-8 w-8 p-0 hover:bg-blue-50"
                              >
                                ğŸ”Š
                              </Button>
                            )}
                            {activeTab === "browse" ? (
                              <Button
                                variant="ghost"
                                size="sm"
                                onClick={() => addToBasket(card)}
                                disabled={isInBasket(card.id)}
                                className={`h-8 w-8 p-0 ${
                                  isInBasket(card.id)
                                    ? "bg-green-50 text-green-600"
                                    : "hover:bg-green-50"
                                }`}
                              >
                                {isInBasket(card.id) ? "âœ…" : "ğŸ›’"}
                              </Button>
                            ) : (
                              <Button
                                variant="ghost"
                                size="sm"
                                onClick={() => removeFromBasket(card.id)}
                                className="h-8 w-8 p-0 hover:bg-red-50"
                              >
                                ğŸ—‘ï¸
                              </Button>
                            )}
                          </div>
                        </div>
                        <CardTitle className="text-lg font-bold text-gray-800 leading-tight mt-2">
                          {card.front}
                        </CardTitle>
                        {card.pronunciation && (
                          <CardDescription className="text-blue-600 font-medium">
                            {card.pronunciation}
                          </CardDescription>
                        )}
                      </CardHeader>
                      <CardContent>
                        <p className="text-gray-600 leading-relaxed">
                          {card.back}
                        </p>
                        <div className="flex flex-wrap gap-1 mt-3">
                          {card.categories?.map((category) => (
                            <span
                              key={category.id}
                              className="px-2 py-1 text-xs rounded-full text-white font-medium"
                              style={{ backgroundColor: category.color }}
                            >
                              {category.name}
                            </span>
                          ))}
                        </div>
                      </CardContent>
                    </Card>
                  </motion.div>
                )
              )}
            </AnimatePresence>
          </motion.div>

          {/* Empty States */}
          {activeTab === "browse" && filteredFlashcards?.length === 0 && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              transition={{ duration: 0.5 }}
            >
              <Card className="text-center py-12 border-0 shadow-lg bg-linear-to-br from-gray-50 to-blue-50">
                <CardContent>
                  <div className="text-6xl mb-4">ğŸ”</div>
                  <h3 className="text-lg font-semibold mb-2">
                    Ù‡ÛŒÚ† Ú©Ø§Ø±ØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯
                  </h3>
                  <p className="text-muted-foreground">
                    {allFlashcards?.length === 0
                      ? "Ù‡Ù†ÙˆØ² Ù‡ÛŒÚ† Ú©Ø§Ø±ØªÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª"
                      : "Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø®ÙˆØ¯ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯"}
                  </p>
                </CardContent>
              </Card>
            </motion.div>
          )}

          {activeTab === "basket" && basketCards?.length === 0 && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              transition={{ duration: 0.5 }}
            >
              <Card className="text-center py-12 border-0 shadow-lg bg-linear-to-br from-gray-50 to-orange-50">
                <CardContent>
                  <div className="text-6xl mb-4">ğŸ›’</div>
                  <h3 className="text-lg font-semibold mb-2">
                    Ø³Ø¨Ø¯ Ù…Ø±ÙˆØ± Ø®Ø§Ù„ÛŒ Ø§Ø³Øª
                  </h3>
                  <p className="text-muted-foreground mb-4">
                    Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø±ÙˆØ± Ø¨Ù‡ Ø³Ø¨Ø¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
                  </p>
                  <Button
                    onClick={() => setActiveTab("browse")}
                    className="bg-orange-600 hover:bg-orange-700"
                  >
                    Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
                  </Button>
                </CardContent>
              </Card>
            </motion.div>
          )}
        </div>
      </main>
    </div>
  );
}

-----

the codes of file with route : /app/globals.css :
@import "tailwindcss";

@theme {
  --font-sans: "Vazirmatn", "system-ui", "sans-serif";

  --color-background: hsl(210 40% 98%);
  --color-foreground: hsl(222.2 84% 4.9%);
  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(222.2 84% 4.9%);
  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(222.2 84% 4.9%);
  --color-primary: hsl(217 91% 60%);
  --color-primary-foreground: hsl(210 40% 98%);
  --color-secondary: hsl(210 40% 96%);
  --color-secondary-foreground: hsl(222.2 47.4% 11.2%);
  --color-muted: hsl(210 40% 96%);
  --color-muted-foreground: hsl(215.4 16.3% 46.9%);
  --color-accent: hsl(210 40% 96%);
  --color-accent-foreground: hsl(222.2 47.4% 11.2%);
  --color-destructive: hsl(0 84.2% 60.2%);
  --color-destructive-foreground: hsl(210 40% 98%);
  --color-border: hsl(214.3 31.8% 91.4%);
  --color-input: hsl(214.3 31.8% 91.4%);
  --color-ring: hsl(217 91% 60%);
  --color-chart-1: hsl(12 76% 61%);
  --color-chart-2: hsl(173 58% 39%);
  --color-chart-3: hsl(197 37% 24%);
  --color-chart-4: hsl(43 74% 66%);
  --color-chart-5: hsl(27 87% 67%);

  --radius: 1rem;
}

* {
  border-color: hsl(var(--border));
  box-sizing: border-box;
}

body {
  @apply bg-linear-to-br from-blue-50 via-white to-cyan-50;
  font-family: "Vazirmatn", "Segoe UI", system-ui, sans-serif;
  font-variant-numeric: Persian;
  -webkit-font-feature-settings: "numr";
  /* font-feature-settings: "numr"; */
  font-feature-settings: "ss01";
  direction: rtl;
  line-height: 1.6;
}

/* Ø·Ø±Ø­ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ Ùˆ Ù…Ø¯Ø±Ù† */
.glass {
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
}

/* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù† Ø¨Ø§ Ø³Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ¨Ø§ */
.modern-card {
  @apply bg-white/80 backdrop-blur-sm border border-white/50 shadow-xl;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.9) 0%,
    rgba(255, 255, 255, 0.7) 100%
  );
}

/* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù† */
.btn-modern {
  @apply bg-linear-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 font-medium py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 text-violet-800!;
}

/* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ */
@keyframes float {
  0%,
  100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes pulse-glow {
  0%,
  100% {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.6);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* Ù‡Ø¯Ø± Ú¯Ø±Ø§Ø¯ÛŒÙ†Øª Ù¾Ø²Ø´Ú©ÛŒ */
.medical-gradient {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.medical-gradient-light {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.medical-gradient-success {
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}

/* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØµÙˆØµ Ù¾Ø²Ø´Ú©ÛŒ */
.stethoscope-icon {
  @apply text-blue-500 animate-pulse;
}

.heart-beat {
  animation: heartBeat 1.5s ease-in-out infinite;
}

@keyframes heartBeat {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

/* Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ø§Ø± Ø²ÛŒØ¨Ø§ */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(59, 130, 246, 0.1);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
}

/* Ø§ÙÚ©Øªâ€ŒÙ‡Ø§ÛŒ hover Ù¾ÛŒØ´Ø±ÙØªÙ‡ */
.hover-lift {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.hover-lift:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
}

/* Ù…ØªÙ†â€ŒÙ‡Ø§ÛŒ Ú¯Ø±Ø§Ø¯ÛŒÙ†Øª */
.gradient-text {
  @apply text-violet-800!;
  /* background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text; */
}

/* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
@media (max-width: 768px) {
  .glass {
    backdrop-filter: blur(8px);
  }
}

/* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† fade-in Ø¨Ø±Ø§ÛŒ Ù…Ø­ØªÙˆØ§ */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out;
}

-----

the codes of file with route : /app/page.tsx :
'use client'

import { useAuth } from '../components/auth-provider'
import { LoginForm } from '../components/login-form'
import { Dashboard } from '../components/dashboard'
import { motion, AnimatePresence } from 'framer-motion'

export default function Home() {
  const { user, isLoading } = useAuth()

  if (isLoading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-linear-to-br from-blue-400 via-blue-500 to-cyan-500">
        <motion.div
          initial={{ opacity: 0, scale: 0.8 }}
          animate={{ opacity: 1, scale: 1 }}
          className="text-center text-white"
        >
          <div className="text-6xl mb-4">ğŸ¥</div>
          <div className="text-xl font-semibold">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ… Ù¾Ø²Ø´Ú©ÛŒ...</div>
          <div className="mt-2 text-blue-100">Ù„Ø·ÙØ§Ù‹ Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯</div>
        </motion.div>
      </div>
    )
  }

  return (
    <AnimatePresence mode="wait">
      {!user ? (
        <motion.div
          key="login"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          className="min-h-screen bg-linear-to-br from-blue-400 via-blue-500 to-cyan-500"
        >
          <LoginForm />
        </motion.div>
      ) : (
        <motion.div
          key="dashboard"
          initial={{ opacity: 0, x: 20 }}
          animate={{ opacity: 1, x: 0 }}
          exit={{ opacity: 0, x: -20 }}
        >
          <Dashboard />
        </motion.div>
      )}
    </AnimatePresence>
  )
}
-----

the codes of file with route : /app/phrases/page.tsx :
"use client";
import { useState, useEffect, useCallback } from "react";
import { Sidebar } from "../../components/layout/sidebar";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "../../components/ui/card";
import { Button } from "../../components/ui/button";
import { Input } from "../../components/ui/input";
import { AddPhraseDialog } from "../../components/add-phrase-dialog";
import { EditPhraseDialog } from "../../components/edit-phrase-dialog";
import { Category, MedicalPhrase } from "../../types";
import { useAuth } from "../../components/auth-provider";
import { motion, AnimatePresence } from "framer-motion";
import { useToast } from "../../hooks/use-toast";
import { ImportFromJsonDialog } from "../../components/import-from-json-dialog";

export default function PhrasesPage() {
  const [phrases, setPhrases] = useState<MedicalPhrase[]>([]);
  const [categories, setCategories] = useState<Category[]>([]);
  const [searchTerm, setSearchTerm] = useState("");
  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState("");
  const [isLoading, setIsLoading] = useState(true);
  const [showAddDialog, setShowAddDialog] = useState(false);
  const [showEditDialog, setShowEditDialog] = useState(false);
  const [showImportDialog, setShowImportDialog] = useState(false);
  const [editingPhrase, setEditingPhrase] = useState<MedicalPhrase | null>(
    null
  );
  const { user } = useAuth();
  const { toast } = useToast();

  // Debounce search
  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedSearchTerm(searchTerm);
    }, 300);

    return () => clearTimeout(timer);
  }, [searchTerm]);

  useEffect(() => {
    if (user) {
      fetchPhrases();
      fetchCategories();
    }
  }, [user]);

  const fetchCategories = () => {
    fetch("/api/categories")
      .then((response) => response.json())
      .then((data) => {
        setCategories(data.data || []);
      })
      .catch((error) => {
        console.error("Error fetching categories:", error);
        toast({
          title: "Ø®Ø·Ø§",
          description: "Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¢Ù…Ø¯",
          variant: "destructive",
        });
      })
      .finally(() => {
        setIsLoading(false);
      });
  };

  const fetchPhrases = useCallback(async () => {
    const controller = new AbortController();
    try {
      const response = await fetch("/api/phrases", {
        signal: controller.signal,
      });
      if (response.ok) {
        const data = await response.json();
        setPhrases(data.data || []);
      } else {
        throw new Error("Failed to fetch phrases");
      }
    } catch (error: any) {
      if (error.name !== "AbortError") {
        console.error("Error fetching phrases:", error);
        toast({
          title: "Ø®Ø·Ø§",
          description: "Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¹Ø¨Ø§Ø±Ø§Øª Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¢Ù…Ø¯",
          variant: "destructive",
        });
      }
    } finally {
      setIsLoading(false);
    }

    return () => controller.abort();
  }, [toast]);

  const filteredPhrases = phrases.filter(
    (phrase) =>
      phrase.phrase.toLowerCase().includes(debouncedSearchTerm.toLowerCase()) ||
      phrase.explanation
        .toLowerCase()
        .includes(debouncedSearchTerm.toLowerCase())
    // phrase.context?.toLowerCase().includes(debouncedSearchTerm.toLowerCase())
  );

  const handleAddPhrase = async (phraseData: {
    phrase: string;
    explanation: string;
    context?: string;
    categories: string[];
  }) => {
    try {
      const response = await fetch("/api/phrases", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(phraseData),
      });

      if (response.ok) {
        const result = await response.json();
        setPhrases((prev) => [result.data, ...prev]);
        setShowAddDialog(false);
        toast({
          title: "Ù…ÙˆÙÙ‚",
          description: "Ø¹Ø¨Ø§Ø±Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯",
        });
      } else {
        const errorData = await response.json();
        throw new Error(errorData.error || "Failed to add phrase");
      }
    } catch (error: any) {
      console.error("Error adding phrase:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± Ø§ÙØ²ÙˆØ¯Ù† Ø¹Ø¨Ø§Ø±Øª",
        variant: "destructive",
      });
    }
  };

  const handleEditPhrase = async (phraseData: {
    phrase: string;
    explanation: string;
    context?: string;
    categories: string[];
  }) => {
    if (!editingPhrase) return;

    try {
      const response = await fetch(`/api/phrases/${editingPhrase.id}`, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(phraseData),
      });

      if (response.ok) {
        const result = await response.json();
        setPhrases((prev) =>
          prev?.map((phrase) =>
            phrase.id === editingPhrase.id ? result.data : phrase
          )
        );
        setShowEditDialog(false);
        setEditingPhrase(null);
        toast({
          title: "Ù…ÙˆÙÙ‚",
          description: "Ø¹Ø¨Ø§Ø±Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯",
        });
      } else {
        const errorData = await response.json();
        throw new Error(errorData.error || "Failed to update phrase");
      }
    } catch (error: any) {
      console.error("Error updating phrase:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± ÙˆÛŒØ±Ø§ÛŒØ´ Ø¹Ø¨Ø§Ø±Øª",
        variant: "destructive",
      });
    }
  };

  const handleDeletePhrase = async (phraseId: string) => {
    if (!confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¹Ø¨Ø§Ø±Øª Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ")) return;

    try {
      const response = await fetch(`/api/phrases/${phraseId}`, {
        method: "DELETE",
      });

      if (response.ok) {
        setPhrases((prev) => prev.filter((phrase) => phrase.id !== phraseId));
        toast({
          title: "Ù…ÙˆÙÙ‚",
          description: "Ø¹Ø¨Ø§Ø±Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯",
        });
      } else {
        const errorData = await response.json();
        throw new Error(errorData.error || "Failed to delete phrase");
      }
    } catch (error: any) {
      console.error("Error deleting phrase:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ø¹Ø¨Ø§Ø±Øª",
        variant: "destructive",
      });
    }
  };

  const openEditDialog = (phrase: MedicalPhrase) => {
    setEditingPhrase(phrase);
    setShowEditDialog(true);
  };

  // Text-to-speech function
  const speakText = (text: string) => {
    if ("speechSynthesis" in window) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "en-US";
      utterance.rate = 0.8;
      speechSynthesis.speak(utterance);
    } else {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Ù‚Ø§Ø¨Ù„ÛŒØª Ù¾Ø®Ø´ ØµØ¯Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯",
        variant: "destructive",
      });
    }
  };

  if (isLoading) {
    return (
      <div className="flex min-h-screen bg-background">
        <Sidebar />
        <main className="flex-1 overflow-y-auto p-4 md:p-8">
          <div className="space-y-6">
            <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
              <div className="space-y-2">
                <div className="h-8 w-48 bg-gray-200 rounded animate-pulse"></div>
                <div className="h-4 w-64 bg-gray-200 rounded animate-pulse"></div>
              </div>
              <div className="flex gap-2">
                <div className="h-10 w-32 bg-gray-200 rounded animate-pulse"></div>
                <div className="h-10 w-40 bg-gray-200 rounded animate-pulse"></div>
              </div>
            </div>
            <div className="h-20 bg-gray-200 rounded animate-pulse"></div>
            <div className="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
              {[...Array(6)]?.map((_, i) => (
                <div
                  key={i}
                  className="h-48 bg-gray-200 rounded animate-pulse"
                ></div>
              ))}
            </div>
          </div>
        </main>
      </div>
    );
  }

  return (
    <div className="flex min-h-screen bg-background">
      <Sidebar />
      <main className="flex-1 overflow-y-auto p-4 md:p-8">
        <div className="space-y-6">
          <motion.div
            className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"
            initial={{ opacity: 0, y: -20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
          >
            <div>
              <h1 className="text-2xl md:text-3xl font-bold tracking-tight">
                ğŸ’¬ Ø¹Ø¨Ø§Ø±Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ
              </h1>
              <p className="text-muted-foreground text-sm md:text-base">
                Ù…Ø¯ÛŒØ±ÛŒØª Ùˆ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø¹Ø¨Ø§Ø±Ø§Øª Ùˆ Ø¬Ù…Ù„Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ
              </p>
            </div>
            <div className="flex gap-2">
              <Button
                onClick={() => setShowImportDialog(true)}
                variant="outline"
                className="border-green-600 text-green-600 hover:bg-green-50"
              >
                ğŸ“¥ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø§Ø² JSON
              </Button>
              <Button
                onClick={() => setShowAddDialog(true)}
                className="bg-blue-600 hover:bg-blue-700 w-full sm:w-auto shadow-lg transition-all duration-300 hover:scale-105"
              >
                â• Ø§ÙØ²ÙˆØ¯Ù† Ø¹Ø¨Ø§Ø±Øª Ø¬Ø¯ÛŒØ¯
              </Button>
            </div>
          </motion.div>

          {/* Search */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5, delay: 0.1 }}
          >
            <Card className="shadow-md border-0 bg-linear-to-r from-blue-50 to-indigo-50">
              <CardContent className="p-4 md:p-6">
                <Input
                  placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¹Ø¨Ø§Ø±Ø§Øª..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="w-full text-right"
                />
              </CardContent>
            </Card>
          </motion.div>

          {/* Phrases Grid */}
          <motion.div
            className="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"
            layout
          >
            <AnimatePresence>
              {filteredPhrases?.map((phrase, index) => (
                <motion.div
                  key={phrase.id}
                  initial={{ opacity: 0, scale: 0.9 }}
                  animate={{ opacity: 1, scale: 1 }}
                  exit={{ opacity: 0, scale: 0.9 }}
                  transition={{
                    duration: 0.3,
                    delay: Math.min(index * 0.05, 0.5),
                  }}
                  layout
                >
                  <Card className="hover:shadow-xl transition-all duration-300 border-0 bg-white shadow-sm hover:border-blue-200 cursor-pointer group">
                    <CardHeader className="pb-3">
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-3">
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={() => speakText(phrase.phrase)}
                            className="h-8 w-8 p-0 hover:bg-blue-50"
                          >
                            ğŸ”Š
                          </Button>
                          <CardTitle className="text-lg font-bold text-gray-800 leading-tight">
                            {phrase.phrase}
                          </CardTitle>
                        </div>
                        <div className="flex gap-1">
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={(e) => {
                              e.stopPropagation();
                              openEditDialog(phrase);
                            }}
                            className="h-8 w-8 p-0 hover:bg-blue-50"
                          >
                            âœï¸
                          </Button>
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={(e) => {
                              e.stopPropagation();
                              handleDeletePhrase(phrase.id);
                            }}
                            className="h-8 w-8 p-0 hover:bg-red-50"
                          >
                            ğŸ—‘ï¸
                          </Button>
                        </div>
                      </div>
                      <CardDescription className="text-right text-gray-600 mt-2">
                        {phrase.explanation}
                      </CardDescription>
                    </CardHeader>
                    <CardContent>
                      {/* {phrase.context && (
                        <div className="mb-3">
                          <p className="text-sm text-gray-700 leading-relaxed">
                            <span className="font-medium">Ú©Ø§Ø±Ø¨Ø±Ø¯:</span> {phrase.context}
                          </p>
                        </div>
                      )} */}
                      <div className="flex flex-wrap gap-1">
                        {phrase.categories?.map((category) => (
                          <span
                            key={category.id}
                            className="px-2 py-1 text-xs rounded-full text-white font-medium shadow-sm"
                            style={{ backgroundColor: category.color }}
                          >
                            {category.name}
                          </span>
                        ))}
                      </div>
                      <div className="text-xs text-muted-foreground text-left mt-3">
                        Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡:{" "}
                        {new Date(phrase.createdAt).toLocaleDateString("fa-IR")}
                      </div>
                    </CardContent>
                  </Card>
                </motion.div>
              ))}
            </AnimatePresence>
          </motion.div>

          {filteredPhrases?.length === 0 && !isLoading && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              transition={{ duration: 0.5 }}
            >
              <Card className="text-center py-12 border-0 shadow-lg bg-linear-to-br from-gray-50 to-blue-50">
                <CardContent>
                  <div className="text-6xl mb-4">ğŸ’¬</div>
                  <h3 className="text-lg font-semibold mb-2">
                    Ù‡ÛŒÚ† Ø¹Ø¨Ø§Ø±ØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯
                  </h3>
                  <p className="text-muted-foreground mb-4">
                    {phrases?.length === 0
                      ? "Ø¨Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø¹Ø¨Ø§Ø±Øª Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯"
                      : "Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø®ÙˆØ¯ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯"}
                  </p>
                  {phrases?.length === 0 && (
                    <div className="flex gap-2 justify-center">
                      <Button
                        onClick={() => setShowImportDialog(true)}
                        variant="outline"
                        className="border-green-600 text-green-600 hover:bg-green-50"
                      >
                        ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø§Ø² JSON
                      </Button>
                      <Button
                        onClick={() => setShowAddDialog(true)}
                        className="bg-blue-600 hover:bg-blue-700 shadow-lg"
                      >
                        Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø¹Ø¨Ø§Ø±Øª
                      </Button>
                    </div>
                  )}
                </CardContent>
              </Card>
            </motion.div>
          )}
        </div>

        {showAddDialog && (
          <AddPhraseDialog
            categories={categories}
            onClose={() => setShowAddDialog(false)}
            // @ts-ignore
            onAdd={handleAddPhrase}
          />
        )}

        {showEditDialog && editingPhrase && (
          <EditPhraseDialog
            phrase={editingPhrase}
            onClose={() => {
              setShowEditDialog(false);
              setEditingPhrase(null);
            }}
            onSave={handleEditPhrase}
          />
        )}

        {showImportDialog && (
          <ImportFromJsonDialog
            onClose={() => setShowImportDialog(false)}
            onImport={() => {
              fetchPhrases();
              toast({
                title: "Ù…ÙˆÙÙ‚",
                description: "Ø¹Ø¨Ø§Ø±Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù†Ø¯",
              });
            }}
            type="phrases"
          />
        )}
      </main>
    </div>
  );
}

-----

the codes of file with route : /app/providers.tsx :
"use client";
import { ToastProvider } from "@/components/ui/toast";

export function Providers({ children }: { children: React.ReactNode }) {
  return <ToastProvider>{children}</ToastProvider>;
}
-----

the codes of file with route : /app/terms/page.tsx :
"use client";
import { useState, useEffect, useCallback } from "react";
import { Sidebar } from "../../components/layout/sidebar";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "../../components/ui/card";
import { Button } from "../../components/ui/button";
import { Input } from "../../components/ui/input";
import { AddTermDialog } from "../../components/add-term-dialog";
import { EditTermDialog } from "../../components/edit-term-dialog";
import { Category, MedicalTerm } from "../../types";
import { useAuth } from "../../components/auth-provider";
import { motion, AnimatePresence } from "framer-motion";
import { useToast } from "../../hooks/use-toast";
import { ImportFromJsonDialog } from "../../components/import-from-json-dialog";

export default function TermsPage() {
  const [terms, setTerms] = useState<MedicalTerm[]>([]);
  const [categories, setCategories] = useState<Category[]>([]);
  const [searchTerm, setSearchTerm] = useState("");
  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState("");
  const [isLoading, setIsLoading] = useState(true);
  const [showAddDialog, setShowAddDialog] = useState(false);
  const [showEditDialog, setShowEditDialog] = useState(false);
  const [showImportDialog, setShowImportDialog] = useState(false);
  const [editingTerm, setEditingTerm] = useState<MedicalTerm | null>(null);
  const { user } = useAuth();
  const { toast } = useToast();

  // Debounce search
  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedSearchTerm(searchTerm);
    }, 300);

    return () => clearTimeout(timer);
  }, [searchTerm]);

  useEffect(() => {
    if (user) {
      fetchTerms();
      fetchCategories();
    }
  }, [user]);

  const fetchCategories = () => {
    fetch("/api/categories")
      .then((response) => response.json())
      .then((data) => {
        setCategories(data.data || []);
      })
      .catch((error) => {
        console.error("Error fetching categories:", error);
        toast({
          title: "Ø®Ø·Ø§",
          description: "Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¢Ù…Ø¯",
          variant: "destructive",
        });
      })
      .finally(() => {
        setIsLoading(false);
      });
  };

  const fetchTerms = useCallback(async () => {
    const controller = new AbortController();
    try {
      const response = await fetch("/api/terms", {
        signal: controller.signal,
      });
      if (response.ok) {
        const data = await response.json();
        setTerms(data.data || []);
      } else {
        throw new Error("Failed to fetch terms");
      }
    } catch (error: any) {
      if (error.name !== "AbortError") {
        console.error("Error fetching terms:", error);
        toast({
          title: "Ø®Ø·Ø§",
          description: "Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¢Ù…Ø¯",
          variant: "destructive",
        });
      }
    } finally {
      setIsLoading(false);
    }

    return () => controller.abort();
  }, [toast]);

  const filteredTerms = terms.filter(
    (term) =>
      term.term.toLowerCase().includes(debouncedSearchTerm.toLowerCase()) ||
      term.meaning.toLowerCase().includes(debouncedSearchTerm.toLowerCase()) ||
      term.pronunciation
        ?.toLowerCase()
        .includes(debouncedSearchTerm.toLowerCase())
    // term.explanation?.toLowerCase().includes(debouncedSearchTerm.toLowerCase())
  );

  const handleAddTerm = async (termData: {
    term: string;
    meaning: string;
    pronunciation?: string;
    explanation?: string;
    categories: string[];
  }) => {
    try {
      const response = await fetch("/api/terms", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(termData),
      });

      if (response.ok) {
        const result = await response.json();
        setTerms((prev) => [result.data, ...prev]);
        setShowAddDialog(false);
        toast({
          title: "Ù…ÙˆÙÙ‚",
          description: "Ø§ØµØ·Ù„Ø§Ø­ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯",
        });
      } else {
        const errorData = await response.json();
        throw new Error(errorData.error || "Failed to add term");
      }
    } catch (error: any) {
      console.error("Error adding term:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± Ø§ÙØ²ÙˆØ¯Ù† Ø§ØµØ·Ù„Ø§Ø­",
        variant: "destructive",
      });
    }
  };

  const handleEditTerm = async (termData: {
    term: string;
    meaning: string;
    pronunciation?: string;
    explanation?: string;
    categories: string[];
  }) => {
    if (!editingTerm) return;

    try {
      const response = await fetch(`/api/terms/${editingTerm.id}`, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(termData),
      });

      if (response.ok) {
        const result = await response.json();
        setTerms((prev) =>
          prev?.map((term) => (term.id === editingTerm.id ? result.data : term))
        );
        setShowEditDialog(false);
        setEditingTerm(null);
        toast({
          title: "Ù…ÙˆÙÙ‚",
          description: "Ø§ØµØ·Ù„Ø§Ø­ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯",
        });
      } else {
        const errorData = await response.json();
        throw new Error(errorData.error || "Failed to update term");
      }
    } catch (error: any) {
      console.error("Error updating term:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± ÙˆÛŒØ±Ø§ÛŒØ´ Ø§ØµØ·Ù„Ø§Ø­",
        variant: "destructive",
      });
    }
  };

  const handleDeleteTerm = async (termId: string) => {
    if (!confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø§ØµØ·Ù„Ø§Ø­ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ")) return;

    try {
      const response = await fetch(`/api/terms/${termId}`, {
        method: "DELETE",
      });

      if (response.ok) {
        setTerms((prev) => prev.filter((term) => term.id !== termId));
        toast({
          title: "Ù…ÙˆÙÙ‚",
          description: "Ø§ØµØ·Ù„Ø§Ø­ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯",
        });
      } else {
        const errorData = await response.json();
        throw new Error(errorData.error || "Failed to delete term");
      }
    } catch (error: any) {
      console.error("Error deleting term:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ø§ØµØ·Ù„Ø§Ø­",
        variant: "destructive",
      });
    }
  };

  const openEditDialog = (term: MedicalTerm) => {
    setEditingTerm(term);
    setShowEditDialog(true);
  };

  // Text-to-speech function
  const speakText = (text: string) => {
    if ("speechSynthesis" in window) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "en-US";
      utterance.rate = 0.8;
      speechSynthesis.speak(utterance);
    } else {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Ù‚Ø§Ø¨Ù„ÛŒØª Ù¾Ø®Ø´ ØµØ¯Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯",
        variant: "destructive",
      });
    }
  };

  if (isLoading) {
    return (
      <div className="flex min-h-screen bg-background">
        <Sidebar />
        <main className="flex-1 overflow-y-auto p-4 md:p-8">
          <div className="space-y-6">
            <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
              <div className="space-y-2">
                <div className="h-8 w-48 bg-gray-200 rounded animate-pulse"></div>
                <div className="h-4 w-64 bg-gray-200 rounded animate-pulse"></div>
              </div>
              <div className="flex gap-2">
                <div className="h-10 w-32 bg-gray-200 rounded animate-pulse"></div>
                <div className="h-10 w-40 bg-gray-200 rounded animate-pulse"></div>
              </div>
            </div>
            <div className="h-20 bg-gray-200 rounded animate-pulse"></div>
            <div className="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
              {[...Array(6)]?.map((_, i) => (
                <div
                  key={i}
                  className="h-48 bg-gray-200 rounded animate-pulse"
                ></div>
              ))}
            </div>
          </div>
        </main>
      </div>
    );
  }

  return (
    <div className="flex min-h-screen bg-background">
      <Sidebar />
      <main className="flex-1 overflow-y-auto p-4 md:p-8">
        <div className="space-y-6">
          <motion.div
            className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"
            initial={{ opacity: 0, y: -20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
          >
            <div>
              <h1 className="text-2xl md:text-3xl font-bold tracking-tight">
                ğŸ“– Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ
              </h1>
              <p className="text-muted-foreground text-sm md:text-base">
                Ù…Ø¯ÛŒØ±ÛŒØª Ùˆ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø§ØµØ·Ù„Ø§Ø­Ø§Øª ØªØ®ØµØµÛŒ Ù¾Ø²Ø´Ú©ÛŒ
              </p>
            </div>
            <div className="flex gap-2">
              <Button
                onClick={() => setShowImportDialog(true)}
                variant="outline"
                className="border-green-600 text-green-600 hover:bg-green-50"
              >
                ğŸ“¥ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø§Ø² JSON
              </Button>
              <Button
                onClick={() => setShowAddDialog(true)}
                className="bg-blue-600 hover:bg-blue-700 w-full sm:w-auto shadow-lg transition-all duration-300 hover:scale-105"
              >
                â• Ø§ÙØ²ÙˆØ¯Ù† Ø§ØµØ·Ù„Ø§Ø­ Ø¬Ø¯ÛŒØ¯
              </Button>
            </div>
          </motion.div>

          {/* Search */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5, delay: 0.1 }}
          >
            <Card className="shadow-md border-0 bg-linear-to-r from-blue-50 to-indigo-50">
              <CardContent className="p-4 md:p-6">
                <Input
                  placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø§ØµØ·Ù„Ø§Ø­Ø§Øª..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="w-full text-right"
                />
              </CardContent>
            </Card>
          </motion.div>

          {/* Terms Grid */}
          <motion.div
            className="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"
            layout
          >
            <AnimatePresence>
              {filteredTerms?.map((term, index) => (
                <motion.div
                  key={term.id}
                  initial={{ opacity: 0, scale: 0.9 }}
                  animate={{ opacity: 1, scale: 1 }}
                  exit={{ opacity: 0, scale: 0.9 }}
                  transition={{
                    duration: 0.3,
                    delay: Math.min(index * 0.05, 0.5),
                  }}
                  layout
                >
                  <Card className="hover:shadow-xl transition-all duration-300 border-0 bg-white shadow-sm hover:border-blue-200 cursor-pointer group">
                    <CardHeader className="pb-3">
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-3">
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={() => speakText(term.term)}
                            className="h-8 w-8 p-0 hover:bg-blue-50"
                          >
                            ğŸ”Š
                          </Button>
                          <CardTitle className="text-lg font-bold text-gray-800 leading-tight">
                            {term.term}
                          </CardTitle>
                        </div>
                        <div className="flex gap-1">
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={(e) => {
                              e.stopPropagation();
                              openEditDialog(term);
                            }}
                            className="h-8 w-8 p-0 hover:bg-blue-50"
                          >
                            âœï¸
                          </Button>
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={(e) => {
                              e.stopPropagation();
                              handleDeleteTerm(term.id);
                            }}
                            className="h-8 w-8 p-0 hover:bg-red-50"
                          >
                            ğŸ—‘ï¸
                          </Button>
                        </div>
                      </div>
                      {term.pronunciation && (
                        <CardDescription className="text-blue-600 font-medium text-sm">
                          {term.pronunciation}
                        </CardDescription>
                      )}
                      <CardDescription className="text-right text-gray-600 mt-2">
                        {term.meaning}
                      </CardDescription>
                    </CardHeader>
                    <CardContent>
                      {/* {term.explanation && (
                        <div className="mb-3">
                          <p className="text-sm text-gray-700 leading-relaxed">
                            {term.explanation}
                          </p>
                        </div>
                      )} */}
                      <div className="flex flex-wrap gap-1">
                        {term.categories?.map((category) => (
                          <span
                            key={category.id}
                            className="px-2 py-1 text-xs rounded-full text-white font-medium shadow-sm"
                            style={{ backgroundColor: category.color }}
                          >
                            {category.name}
                          </span>
                        ))}
                      </div>
                      <div className="text-xs text-muted-foreground text-left mt-3">
                        Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡:{" "}
                        {new Date(term.createdAt).toLocaleDateString("fa-IR")}
                      </div>
                    </CardContent>
                  </Card>
                </motion.div>
              ))}
            </AnimatePresence>
          </motion.div>

          {filteredTerms?.length === 0 && !isLoading && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              transition={{ duration: 0.5 }}
            >
              <Card className="text-center py-12 border-0 shadow-lg bg-linear-to-br from-gray-50 to-blue-50">
                <CardContent>
                  <div className="text-6xl mb-4">ğŸ“–</div>
                  <h3 className="text-lg font-semibold mb-2">
                    Ù‡ÛŒÚ† Ø§ØµØ·Ù„Ø§Ø­ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯
                  </h3>
                  <p className="text-muted-foreground mb-4">
                    {terms?.length === 0
                      ? "Ø¨Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø§ØµØ·Ù„Ø§Ø­ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯"
                      : "Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø®ÙˆØ¯ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯"}
                  </p>
                  {terms?.length === 0 && (
                    <div className="flex gap-2 justify-center">
                      <Button
                        onClick={() => setShowImportDialog(true)}
                        variant="outline"
                        className="border-green-600 text-green-600 hover:bg-green-50"
                      >
                        ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø§Ø² JSON
                      </Button>
                      <Button
                        onClick={() => setShowAddDialog(true)}
                        className="bg-blue-600 hover:bg-blue-700 shadow-lg"
                      >
                        Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø§ØµØ·Ù„Ø§Ø­
                      </Button>
                    </div>
                  )}
                </CardContent>
              </Card>
            </motion.div>
          )}
        </div>

        {showAddDialog && (
          <AddTermDialog
            onClose={() => setShowAddDialog(false)}
            categories={categories}
            // @ts-ignore
            onAdd={handleAddTerm}
          />
        )}

        {showEditDialog && editingTerm && (
          <EditTermDialog
            term={editingTerm}
            onClose={() => {
              setShowEditDialog(false);
              setEditingTerm(null);
            }}
            onSave={handleEditTerm}
          />
        )}

        {showImportDialog && (
          <ImportFromJsonDialog
            onClose={() => setShowImportDialog(false)}
            onImport={() => {
              fetchTerms();
              toast({
                title: "Ù…ÙˆÙÙ‚",
                description: "Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù†Ø¯",
              });
            }}
            type="terms"
          />
        )}
      </main>
    </div>
  );
}

-----

the codes of file with route : /app/users/page.tsx :
"use client";

import { useState, useEffect } from "react";
import { Sidebar } from "../../components/layout/sidebar";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "../../components/ui/card";
import { Button } from "../../components/ui/button";
import { Input } from "../../components/ui/input";
import { Select } from "../../components/ui/select";
import { motion, AnimatePresence } from "framer-motion";

interface User {
  id: string;
  username: string;
  email: string;
  role: string;
  createdAt: string;
  _count: {
    terms: number;
    phrases: number;
    categories: number;
  };
}

export default function UsersPage() {
  const [users, setUsers] = useState<User[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [showAddForm, setShowAddForm] = useState(false);
  const [formData, setFormData] = useState({
    username: "",
    email: "",
    password: "",
    role: "user",
  });

  useEffect(() => {
    fetchUsers();
  }, []);

  const fetchUsers = async () => {
    try {
      const response = await fetch("/api/users");
      if (response.ok) {
        const data = await response.json();
        setUsers(data.data || []);
      }
    } catch (error) {
      console.error("Error fetching users:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      const response = await fetch("/api/users", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(formData),
      });

      if (response.ok) {
        const result = await response.json();
        setUsers((prev) => [result.data, ...prev]);
        setShowAddForm(false);
        setFormData({ username: "", email: "", password: "", role: "user" });
      } else {
        const error = await response.json();
        alert(error.error || "Failed to create user");
      }
    } catch (error) {
      console.error("Error creating user:", error);
      alert("Error creating user");
    }
  };

  if (isLoading) {
    return (
      <div className="flex h-screen bg-background">
        <Sidebar />
        <main className="flex-1 overflow-y-auto p-8">
          <div className="text-center">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
        </main>
      </div>
    );
  }

  return (
    <div className="flex h-screen bg-background">
      <Sidebar />
      <main className="flex-1 overflow-y-auto p-4 md:p-8">
        <div className="space-y-6">
          <motion.div 
            className="flex justify-between items-center"
            initial={{ opacity: 0, y: -20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
          >
            <div>
              <h1 className="text-2xl md:text-3xl font-bold tracking-tight">
                ğŸ‘¥ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
              </h1>
              <p className="text-muted-foreground text-sm md:text-base">
                Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ùˆ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡
              </p>
            </div>
            <Button
              onClick={() => setShowAddForm(true)}
              className="bg-blue-600 hover:bg-blue-700 shadow-lg transition-all duration-300 hover:scale-105"
            >
              â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
            </Button>
          </motion.div>

          {/* Users List */}
          <motion.div 
            className="grid gap-4"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5, delay: 0.1 }}
          >
            <AnimatePresence>
              {users?.map((user, index) => (
                <motion.div
                  key={user.id}
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  transition={{ duration: 0.3, delay: index * 0.1 }}
                >
                  <Card className="hover:shadow-xl transition-all duration-300 border-0 bg-white shadow-sm hover:border-blue-200">
                    <CardContent className="p-6">
                      <div className="flex justify-between items-start">
                        <div className="space-y-3">
                          <div className="flex items-center gap-3">
                            <h3 className="font-semibold text-lg text-gray-800">
                              {user.username}
                            </h3>
                            <span
                              className={`px-3 py-1 text-xs rounded-full font-medium shadow-sm ${
                                user.role === "admin"
                                  ? "bg-purple-500 text-white"
                                  : "bg-blue-500 text-white"
                              }`}
                            >
                              {user.role === "admin" ? "Ù…Ø¯ÛŒØ±" : "Ú©Ø§Ø±Ø¨Ø±"}
                            </span>
                          </div>
                          <p className="text-muted-foreground text-right">{user.email}</p>
                          <div className="flex gap-6 text-sm text-muted-foreground">
                            <span className="bg-gray-50 px-3 py-1 rounded-full">
                              Ø§ØµØ·Ù„Ø§Ø­Ø§Øª: {user._count.terms}
                            </span>
                            <span className="bg-gray-50 px-3 py-1 rounded-full">
                              Ø¹Ø¨Ø§Ø±Ø§Øª: {user._count.phrases}
                            </span>
                            <span className="bg-gray-50 px-3 py-1 rounded-full">
                              Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§: {user._count.categories}
                            </span>
                          </div>
                        </div>
                        <div className="text-sm text-muted-foreground text-left">
                          Ø¹Ø¶ÙˆÛŒØª: {new Date(user.createdAt).toLocaleDateString('fa-IR')}
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </motion.div>
              ))}
            </AnimatePresence>
          </motion.div>

          {users?.length === 0 && !isLoading && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              transition={{ duration: 0.5 }}
            >
              <Card className="text-center py-12 border-0 shadow-lg bg-linear-to-br from-gray-50 to-blue-50">
                <CardContent>
                  <div className="text-6xl mb-4">ğŸ‘¥</div>
                  <h3 className="text-lg font-semibold mb-2">Ù‡ÛŒÚ† Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h3>
                  <p className="text-muted-foreground mb-4">
                    Ø¨Ø§ Ø§ÙØ²ÙˆØ¯Ù† Ø§ÙˆÙ„ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯
                  </p>
                  <Button
                    onClick={() => setShowAddForm(true)}
                    className="bg-blue-600 hover:bg-blue-700 shadow-lg"
                  >
                    Ø§ÙØ²ÙˆØ¯Ù† Ø§ÙˆÙ„ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±
                  </Button>
                </CardContent>
              </Card>
            </motion.div>
          )}
        </div>

        {/* Add User Form */}
        {showAddForm && (
          <motion.div 
            className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
          >
            <motion.div
              initial={{ opacity: 0, scale: 0.9 }}
              animate={{ opacity: 1, scale: 1 }}
              exit={{ opacity: 0, scale: 0.9 }}
              transition={{ duration: 0.3 }}
            >
              <Card className="w-full max-w-md border-0 shadow-2xl">
                <CardHeader className="bg-linear-to-r from-blue-50 to-indigo-50">
                  <CardTitle className="text-xl">Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯</CardTitle>
                  <CardDescription>
                    Ø§ÛŒØ¬Ø§Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡
                  </CardDescription>
                </CardHeader>
                <CardContent className="pt-6">
                  <form onSubmit={handleSubmit} className="space-y-4">
                    <div className="space-y-2">
                      <label className="text-sm font-medium text-right block">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ *</label>
                      <Input
                        value={formData.username}
                        onChange={(e) =>
                          setFormData((prev) => ({
                            ...prev,
                            username: e.target.value,
                          }))
                        }
                        placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"
                        required
                        className="text-right"
                      />
                    </div>

                    <div className="space-y-2">
                      <label className="text-sm font-medium text-right block">Ø§ÛŒÙ…ÛŒÙ„ *</label>
                      <Input
                        type="email"
                        value={formData.email}
                        onChange={(e) =>
                          setFormData((prev) => ({
                            ...prev,
                            email: e.target.value,
                          }))
                        }
                        placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"
                        required
                        className="text-right"
                      />
                    </div>

                    <div className="space-y-2">
                      <label className="text-sm font-medium text-right block">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± *</label>
                      <Input
                        type="password"
                        value={formData.password}
                        onChange={(e) =>
                          setFormData((prev) => ({
                            ...prev,
                            password: e.target.value,
                          }))
                        }
                        placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"
                        required
                        className="text-right"
                      />
                    </div>

                    <div className="space-y-2">
                      <label className="text-sm font-medium text-right block">Ù†Ù‚Ø´</label>
                      <Select
                        value={formData.role}
                        onChange={(e) =>
                          setFormData((prev) => ({
                            ...prev,
                            role: e.target.value,
                          }))
                        }
                        className="bg-white"
                      >
                        <option value="user">Ú©Ø§Ø±Ø¨Ø±</option>
                        <option value="admin">Ù…Ø¯ÛŒØ±</option>
                      </Select>
                    </div>

                    <div className="flex gap-2 justify-end pt-4">
                      <Button
                        type="button"
                        variant="outline"
                        onClick={() => setShowAddForm(false)}
                        className="hover:bg-gray-100"
                      >
                        Ø§Ù†ØµØ±Ø§Ù
                      </Button>
                      <Button
                        type="submit"
                        className="bg-blue-600 hover:bg-blue-700 shadow-lg"
                      >
                        Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±
                      </Button>
                    </div>
                  </form>
                </CardContent>
              </Card>
            </motion.div>
          </motion.div>
        )}
      </main>
    </div>
  );
}
-----

the codes of file with route : /components/add-category-dialog.tsx :
"use client";
import { useState, useRef, useEffect } from "react";
import { Button } from "./ui/button";
import { Input } from "./ui/input";
import { Label } from "./ui/label";
import { Card, CardContent, CardHeader, CardTitle } from "./ui/card";
import { useToast } from "../hooks/use-toast";

interface AddCategoryDialogProps {
  onClose: () => void;
  onAdd: (categoryData: {
    name: string;
    description?: string;
    color: string;
  }) => void;
}

const predefinedColors = [
  "#3B82F6", // blue
  "#EF4444", // red
  "#10B981", // green
  "#F59E0B", // amber
  "#8B5CF6", // violet
  "#EC4899", // pink
  "#06B6D4", // cyan
  "#84CC16", // lime
];

export function AddCategoryDialog({ onClose, onAdd }: AddCategoryDialogProps) {
  const [name, setName] = useState("");
  const [description, setDescription] = useState("");
  const [selectedColor, setSelectedColor] = useState(predefinedColors[0]);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const { toast } = useToast();
  
  const dialogRef = useRef<HTMLDivElement>(null);
  const firstInputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    firstInputRef.current?.focus();
    
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape') {
        onClose();
      }
    };

    const handleClickOutside = (e: MouseEvent) => {
      if (dialogRef.current && !dialogRef.current.contains(e.target as Node)) {
        onClose();
      }
    };

    document.addEventListener('keydown', handleEscape);
    document.addEventListener('mousedown', handleClickOutside);

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, [onClose]);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!name.trim()) {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª",
        variant: "destructive",
      });
      return;
    }

    setIsSubmitting(true);
    
    try {
      await onAdd({
        name: name.trim(),
        description: description.trim() || undefined,
        color: selectedColor,
      });
    } catch (error) {
      console.error("Error in dialog:", error);
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in">
      <div 
        ref={dialogRef}
        className="w-full max-w-md"
        role="dialog"
        aria-modal="true"
        aria-labelledby="dialog-title"
      >
        <Card className="shadow-2xl border-0 bg-linear-to-br from-white to-blue-50">
          <CardHeader className="border-b border-gray-200">
            <CardTitle id="dialog-title" className="text-xl font-bold text-gray-800">
              Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯
            </CardTitle>
          </CardHeader>
          <CardContent className="p-6">
            <form onSubmit={handleSubmit} className="space-y-6">
              {/* Name Field */}
              <div className="space-y-2">
                <Label htmlFor="category-name" className="text-sm font-medium text-gray-700">
                  Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ *
                </Label>
                <Input
                  ref={firstInputRef}
                  id="category-name"
                  type="text"
                  value={name}
                  onChange={(e) => setName(e.target.value)}
                  placeholder="Ù…Ø«Ø§Ù„: Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù‚Ù„Ø¨ Ùˆ Ø¹Ø±ÙˆÙ‚"
                  className="w-full text-right"
                  required
                />
              </div>

              {/* Description Field */}
              <div className="space-y-2">
                <Label htmlFor="category-description" className="text-sm font-medium text-gray-700">
                  ØªÙˆØ¶ÛŒØ­Ø§Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
                </Label>
                <textarea
                  id="category-description"
                  value={description}
                  onChange={(e) => setDescription(e.target.value)}
                  placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ..."
                  rows={3}
                  className="w-full border border-gray-300 rounded-md p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-right"
                />
              </div>

              {/* Color Selection */}
              <div className="space-y-3">
                <Label className="text-sm font-medium text-gray-700">
                  Ø±Ù†Ú¯ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
                </Label>
                <div className="grid grid-cols-4 gap-3">
                  {predefinedColors?.map((color) => (
                    <button
                      key={color}
                      type="button"
                      onClick={() => setSelectedColor(color)}
                      className={`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 ${
                        selectedColor === color
                          ? "border-gray-800 shadow-lg scale-110"
                          : "border-gray-300"
                      }`}
                      style={{ backgroundColor: color }}
                      aria-label={`Select color ${color}`}
                    />
                  ))}
                </div>
                <div className="flex items-center gap-2 pt-2">
                  <div
                    className="w-4 h-4 rounded-full shadow-sm"
                    style={{ backgroundColor: selectedColor }}
                  ></div>
                  <span className="text-sm text-gray-600 font-mono">
                    {selectedColor}
                  </span>
                </div>
              </div>

              {/* Action Buttons */}
              <div className="flex gap-3 pt-4">
                <Button
                  type="button"
                  onClick={onClose}
                  variant="outline"
                  className="flex-1 border-gray-300 text-gray-700 hover:bg-gray-50"
                  disabled={isSubmitting}
                >
                  Ø§Ù†ØµØ±Ø§Ù
                </Button>
                <Button
                  type="submit"
                  className="flex-1 bg-blue-600 hover:bg-blue-700 text-white shadow-lg transition-all duration-200 hover:scale-105"
                  disabled={isSubmitting || !name.trim()}
                >
                  {isSubmitting ? (
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                      <span>Ø¯Ø± Ø­Ø§Ù„ Ø§ÙØ²ÙˆØ¯Ù†...</span>
                    </div>
                  ) : (
                    "â• Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ"
                  )}
                </Button>
              </div>
            </form>
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
-----

the codes of file with route : /components/add-phrase-dialog.tsx :
import { useState } from "react";
import { Button } from "./ui/button";
import { Input } from "./ui/input";
import { Textarea } from "./ui/textarea";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "./ui/card";
import { Category } from "../types";

interface AddPhraseDialogProps {
  categories: Category[];
  onClose: () => void;
  onAdd: (phrase: {
    phrase: string;
    explanation: string;
    categoryIds: string[];
  }) => Promise<void>;
}

export function AddPhraseDialog({
  categories,
  onClose,
  onAdd,
}: AddPhraseDialogProps) {
  const [phrase, setPhrase] = useState("");
  const [explanation, setExplanation] = useState("");
  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);
  const [submitting, setSubmitting] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!phrase.trim() || !explanation.trim()) return;
    setSubmitting(true);

    await onAdd({
      phrase: phrase.trim(),
      explanation: explanation.trim(),
      categoryIds: selectedCategories,
    });
    setSubmitting(false);
  };

  const toggleCategory = (categoryId: string) => {
    setSelectedCategories((prev) =>
      prev.includes(categoryId)
        ? prev.filter((id) => id !== categoryId)
        : [...prev, categoryId]
    );
  };

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
      <Card className="w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <CardHeader>
          <CardTitle>Ø§ÙØ²ÙˆØ¯Ù† Ø§ØµØ·Ù„Ø§Ø­ Ù¾Ø²Ø´Ú©ÛŒ Ø¬Ø¯ÛŒØ¯</CardTitle>
          <CardDescription>
            Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØµØ·Ù„Ø§Ø­ Ù¾Ø²Ø´Ú©ÛŒ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
          </CardDescription>
        </CardHeader>
        <CardContent>
          <form onSubmit={handleSubmit} className="space-y-4">
            <div>
              <label className="text-sm font-medium">Ø§ØµØ·Ù„Ø§Ø­</label>
              <Input
                value={phrase}
                onChange={(e) => setPhrase(e.target.value)}
                placeholder="Ù…Ø«Ù„Ø§ MRI (Ù…Ø±Ø§Ù‚Ø¨Øª Ø¹ØµØ¨ÛŒ)"
                required
              />
            </div>

            <div>
              <label className="text-sm font-medium">ØªÙˆØ¶ÛŒØ­Ø§Øª</label>
              <Textarea
                value={explanation}
                onChange={(e) => setExplanation(e.target.value)}
                placeholder="ØªÙˆØ¶ÛŒØ­ Ø¨Ø¯Ù‡ Ø§ØµØ·Ù„Ø§Ø­ ÛŒÙ†ÛŒ Ú†ÛŒ"
                rows={4}
                required
              />
            </div>

            <div>
              <label className="text-sm font-medium">Categories</label>
              <div className="grid grid-cols-2 gap-2 mt-2">
                {categories?.map((category) => (
                  <div
                    key={category.id}
                    className={`flex items-center gap-2 p-2 border rounded-md cursor-pointer transition-colors ${
                      selectedCategories.includes(category.id)
                        ? "border-green-500 bg-green-50"
                        : "border-gray-200"
                    }`}
                    onClick={() => toggleCategory(category.id)}
                  >
                    <div
                      className="w-3 h-3 rounded-full"
                      style={{ backgroundColor: category.color }}
                    />
                    <span className="text-sm">{category.name}</span>
                  </div>
                ))}
              </div>
            </div>

            <div className="flex gap-2 justify-end pt-4">
              <Button type="button" variant="outline" onClick={onClose}>
                Ù„ØºÙˆ
              </Button>
              <Button
                disabled={submitting}
                type="submit"
                className="bg-green-600 hover:bg-green-700"
              >
                Ø§ÙØ²ÙˆØ¯Ù† Ø§ØµØ·Ù„Ø§Ø­
              </Button>
            </div>
          </form>
        </CardContent>
      </Card>
    </div>
  );
}

-----

the codes of file with route : /components/add-term-dialog.tsx :
import { useState } from "react";
import { Button } from "./ui/button";
import { Input } from "./ui/input";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "./ui/card";
import { Category } from "../types";
import { motion, AnimatePresence } from "framer-motion";

interface AddTermDialogProps {
  categories: Category[];
  onClose: () => void;
  onAdd: (term: {
    term: string;
    meaning: string;
    pronunciation?: string;
    categoryIds: string[];
  }) => Promise<void>;
}

export function AddTermDialog({
  categories,
  onClose,
  onAdd,
}: AddTermDialogProps) {
  const [term, setTerm] = useState("");
  const [meaning, setMeaning] = useState("");
  const [pronunciation, setPronunciation] = useState("");
  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);
  const [submitting, setSubmitting] = useState(true);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!term.trim() || !meaning.trim()) return;
    setSubmitting(true);

    await onAdd({
      term: term.trim(),
      meaning: meaning.trim(),
      pronunciation: pronunciation.trim() || undefined,
      categoryIds: selectedCategories,
    });
    setSubmitting(false);
  };

  const toggleCategory = (categoryId: string) => {
    setSelectedCategories((prev) =>
      prev.includes(categoryId)
        ? prev.filter((id) => id !== categoryId)
        : [...prev, categoryId]
    );
  };

  return (
    <AnimatePresence>
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"
      >
        <motion.div
          initial={{ opacity: 0, scale: 0.9, y: 20 }}
          animate={{ opacity: 1, scale: 1, y: 0 }}
          exit={{ opacity: 0, scale: 0.9, y: 20 }}
        >
          <Card className="w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <CardHeader>
              <CardTitle>â• Ø§ÙØ²ÙˆØ¯Ù† Ø§ØµØ·Ù„Ø§Ø­ Ù¾Ø²Ø´Ú©ÛŒ Ø¬Ø¯ÛŒØ¯</CardTitle>
              <CardDescription>
                Ø§ØµØ·Ù„Ø§Ø­ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ù…Ø¹Ù†ÛŒ Ùˆ ØªÙ„ÙØ¸ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
              </CardDescription>
            </CardHeader>
            <CardContent>
              <form onSubmit={handleSubmit} className="space-y-4">
                <div>
                  <label className="text-sm font-medium">Ø§ØµØ·Ù„Ø§Ø­ *</label>
                  <Input
                    value={term}
                    onChange={(e) => setTerm(e.target.value)}
                    placeholder="Ù…Ø«Ø§Ù„: Hypertension"
                    required
                    className="mt-1"
                  />
                </div>

                <div>
                  <label className="text-sm font-medium">Ù…Ø¹Ù†ÛŒ *</label>
                  <Input
                    value={meaning}
                    onChange={(e) => setMeaning(e.target.value)}
                    placeholder="Ù…Ø«Ø§Ù„: ÙØ´Ø§Ø± Ø®ÙˆÙ† Ø¨Ø§Ù„Ø§"
                    required
                    className="mt-1"
                  />
                </div>

                <div>
                  <label className="text-sm font-medium">ØªÙ„ÙØ¸ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                  <Input
                    value={pronunciation}
                    onChange={(e) => setPronunciation(e.target.value)}
                    placeholder="Ù…Ø«Ø§Ù„: haÉª.pÉ™rËˆten.ÊƒÉ™n"
                    className="mt-1"
                  />
                </div>

                <div>
                  <label className="text-sm font-medium">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</label>
                  {categories?.length === 0 ? (
                    <p className="text-sm text-muted-foreground mt-2">
                      Ù‡ÛŒÚ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§ÛŒØ¬Ø§Ø¯
                      Ú©Ù†ÛŒØ¯.
                    </p>
                  ) : (
                    <div className="grid grid-cols-2 gap-2 mt-2">
                      {categories?.map((category) => (
                        <motion.div
                          key={category.id}
                          whileHover={{ scale: 1.02 }}
                          whileTap={{ scale: 0.98 }}
                          className={`flex items-center gap-2 p-2 border rounded-md cursor-pointer transition-all ${
                            selectedCategories.includes(category.id)
                              ? "border-blue-500 bg-blue-50 shadow-sm"
                              : "border-gray-200 hover:border-gray-300"
                          }`}
                          onClick={() => toggleCategory(category.id)}
                        >
                          <div
                            className="w-3 h-3 rounded-full shadow-sm"
                            style={{ backgroundColor: category.color }}
                          />
                          <span className="text-sm">{category.name}</span>
                        </motion.div>
                      ))}
                    </div>
                  )}
                </div>

                <div className="flex gap-2 justify-end pt-4">
                  <Button
                    type="button"
                    variant="outline"
                    onClick={onClose}
                    className="hover:scale-105 transition-transform"
                  >
                    Ø§Ù†ØµØ±Ø§Ù
                  </Button>
                  <Button
                    type="submit"
                    className="bg-blue-600 hover:bg-blue-700 shadow-lg hover:scale-105 transition-transform"
                    disabled={true}
                  >
                    Ø§ÙØ²ÙˆØ¯Ù† Ø§ØµØ·Ù„Ø§Ø­
                  </Button>
                </div>
              </form>
            </CardContent>
          </Card>
        </motion.div>
      </motion.div>
    </AnimatePresence>
  );
}

-----

the codes of file with route : /components/auth-provider.tsx :
"use client";
import { createContext, useContext, useEffect, useState } from "react";

interface User {
  id: string;
  username: string;
  email: string;
  role: string;
  createdAt: string;
}

interface AuthContextType {
  user: User | null;
  login: (username: string, password: string) => Promise<boolean>;
  logout: () => Promise<void>;
  isLoading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export function AuthProvider({ children }: { children: React.ReactNode }) {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    checkAuth();
  }, []);

  const checkAuth = async () => {
    try {
      const response = await fetch("/api/auth/me");
      if (response.ok) {
        const data = await response.json();
        setUser(data.data);
      }
    } catch (error) {
      console.error("Auth check failed:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const login = async (
    username: string,
    password: string
  ): Promise<boolean> => {
    try {
      const response = await fetch("/api/auth/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ username, password }),
      });

      if (response.ok) {
        const data = await response.json();
        setUser(data.data.user);
        return true;
      }
      return false;
    } catch (error) {
      console.error("Login failed:", error);
      return false;
    }
  };

  const logout = async () => {
    try {
      await fetch("/api/auth/logout", { method: "POST" });
    } catch (error) {
      console.error("Logout failed:", error);
    } finally {
      setUser(null);
    }
  };

  return (
    <AuthContext.Provider value={{ user, login, logout, isLoading }}>
      {children}
    </AuthContext.Provider>
  );
}

export function useAuth() {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error("useAuth must be used within an AuthProvider");
  }
  return context;
}

-----

the codes of file with route : /components/dashboard.tsx :
'use client'

import { useState, useEffect } from 'react'
import { Sidebar } from './layout/sidebar'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card'
import { Button } from './ui/button'
import Link from 'next/link'
import { MedicalTerm, MedicalPhrase, Category } from '../types'
import { motion } from 'framer-motion'

export function Dashboard() {
  const [stats, setStats] = useState({
    terms: 0,
    phrases: 0,
    categories: 0
  })
  const [recentTerms, setRecentTerms] = useState<MedicalTerm[]>([])
  const [recentPhrases, setRecentPhrases] = useState<MedicalPhrase[]>([])

  useEffect(() => {
    fetchDashboardData()
  }, [])

  const fetchDashboardData = async () => {
    try {
      const [termsRes, phrasesRes, categoriesRes] = await Promise.all([
        fetch('/api/terms'),
        fetch('/api/phrases'),
        fetch('/api/categories')
      ])

      if (termsRes.ok) {
        const termsData = await termsRes.json()
        const terms = termsData.data || []
        setStats(prev => ({ ...prev, terms: terms?.length }))
        setRecentTerms(terms.slice(0, 5))
      }

      if (phrasesRes.ok) {
        const phrasesData = await phrasesRes.json()
        const phrases = phrasesData.data || []
        setStats(prev => ({ ...prev, phrases: phrases?.length }))
        setRecentPhrases(phrases.slice(0, 5))
      }

      if (categoriesRes.ok) {
        const categoriesData = await categoriesRes.json()
        setStats(prev => ({ ...prev, categories: categoriesData.data?.length || 0 }))
      }
    } catch (error) {
      console.error('Error fetching dashboard data:', error)
    }
  }

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        staggerChildren: 0.1
      }
    }
  }

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: {
      opacity: 1,
      y: 0,
      transition: {
        duration: 0.5
      }
    }
  }

  return (
    <div className="flex h-screen bg-linear-to-br from-gray-50 to-blue-50">
      <Sidebar />
      <main className="flex-1 overflow-y-auto p-6">
        <motion.div
          variants={containerVariants}
          initial="hidden"
          animate="visible"
          className="space-y-6"
        >
          {/* Header */}
          <motion.div variants={itemVariants} className="text-center mb-8">
            <h1 className="text-4xl font-bold text-violet-500 mb-2">
              ğŸ¥ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ
            </h1>
            <p className="text-gray-600 text-lg">
              Ø³ÛŒØ³ØªÙ… ØªØ®ØµØµÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ùˆ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ
            </p>
          </motion.div>

          {/* Stats Cards */}
          <motion.div variants={itemVariants} className="grid gap-6 md:grid-cols-3">
            <Card className="modern-card hover-lift border-l-4 border-blue-400">
              <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-4">
                <CardTitle className="text-lg font-bold text-blue-800">ğŸ“– Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ</CardTitle>
                <div className="text-2xl text-blue-500">ğŸ“–</div>
              </CardHeader>
              <CardContent>
                <div className="text-3xl font-bold text-blue-900 mb-2">{stats.terms}</div>
                <p className="text-sm text-blue-700">
                  Ø§ØµØ·Ù„Ø§Ø­Ø§Øª ØªØ®ØµØµÛŒ Ø¨Ø§ Ù…Ø¹Ù†ÛŒ Ùˆ ØªÙ„ÙØ¸
                </p>
              </CardContent>
            </Card>

            <Card className="modern-card hover-lift border-l-4 border-green-400">
              <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-4">
                <CardTitle className="text-lg font-bold text-green-800">ğŸ’¬ Ø¹Ø¨Ø§Ø±Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ</CardTitle>
                <div className="text-2xl text-green-500">ğŸ’¬</div>
              </CardHeader>
              <CardContent>
                <div className="text-3xl font-bold text-green-900 mb-2">{stats.phrases}</div>
                <div className="text-sm text-green-700">
                  Ø§Ø®ØªØµØ§Ø±Ø§Øª Ùˆ Ø¹Ø¨Ø§Ø±Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ
                </div>
              </CardContent>
            </Card>

            <Card className="modern-card hover-lift border-l-4 border-purple-400">
              <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-4">
                <CardTitle className="text-lg font-bold text-purple-800">ğŸ·ï¸ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</CardTitle>
                <div className="text-2xl text-purple-500">ğŸ·ï¸</div>
              </CardHeader>
              <CardContent>
                <div className="text-3xl font-bold text-purple-900 mb-2">{stats.categories}</div>
                <div className="text-sm text-purple-700">
                  Ø³Ø§Ø²Ù…Ø§Ù†â€ŒØ¯Ù‡ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ®ØµØµâ€ŒÙ‡Ø§
                </div>
              </CardContent>
            </Card>
          </motion.div>

          {/* Main Content */}
          <div className="grid gap-6 lg:grid-cols-2">
            {/* Recent Terms */}
            <motion.div variants={itemVariants}>
              <Card className="modern-card hover-lift">
                <CardHeader className="flex flex-row items-center justify-between border-b pb-4">
                  <div>
                    <CardTitle className="text-xl font-bold">ğŸ“š Ø¢Ø®Ø±ÛŒÙ† Ø§ØµØ·Ù„Ø§Ø­Ø§Øª</CardTitle>
                    <CardDescription>Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ø§Ø®ÛŒØ±</CardDescription>
                  </div>
                  <Link href="/terms">
                    <Button className="btn-modern text-sm py-2">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡</Button>
                  </Link>
                </CardHeader>
                <CardContent className="space-y-4 pt-4">
                  {recentTerms?.map((term, index) => (
                    <motion.div 
                      key={term.id}
                      initial={{ opacity: 0, x: -20 }}
                      animate={{ opacity: 1, x: 0 }}
                      transition={{ delay: index * 0.1 }}
                      className="flex items-center justify-between p-4 rounded-xl bg-linear-to-r from-blue-50 to-white border border-blue-100"
                    >
                      <div className="flex-1">
                        <div className="font-bold text-lg text-gray-800">{term.term}</div>
                        <div className="text-sm text-gray-600 line-clamp-1">
                          {term.meaning}
                        </div>
                      </div>
                      <div className="flex gap-1 mr-3">
                        {term.categories.slice(0, 2)?.map(cat => (
                          <span
                            key={cat.id}
                            className="w-3 h-3 rounded-full border-2 border-white shadow-sm"
                            style={{ backgroundColor: cat.color }}
                            title={cat.name}
                          />
                        ))}
                      </div>
                    </motion.div>
                  ))}
                  {recentTerms?.length === 0 && (
                    <div className="text-center py-8 text-gray-500">
                      <div className="text-4xl mb-2">ğŸ“–</div>
                      Ù‡Ù†ÙˆØ² Ø§ØµØ·Ù„Ø§Ø­ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª
                    </div>
                  )}
                </CardContent>
              </Card>
            </motion.div>

            {/* Recent Phrases */}
            <motion.div variants={itemVariants}>
              <Card className="modern-card hover-lift">
                <CardHeader className="flex flex-row items-center justify-between border-b pb-4">
                  <div>
                    <CardTitle className="text-xl font-bold">ğŸ’Š Ø¢Ø®Ø±ÛŒÙ† Ø¹Ø¨Ø§Ø±Ø§Øª</CardTitle>
                    <CardDescription>Ø¹Ø¨Ø§Ø±Ø§Øª Ùˆ Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ Ø§Ø®ÛŒØ±</CardDescription>
                  </div>
                  <Link href="/phrases">
                    <Button className="btn-modern text-sm py-2">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡</Button>
                  </Link>
                </CardHeader>
                <CardContent className="space-y-4 pt-4">
                  {recentPhrases?.map((phrase, index) => (
                    <motion.div 
                      key={phrase.id}
                      initial={{ opacity: 0, x: 20 }}
                      animate={{ opacity: 1, x: 0 }}
                      transition={{ delay: index * 0.1 }}
                      className="p-4 rounded-xl bg-linear-to-r from-green-50 to-white border border-green-100"
                    >
                      <div className="font-bold text-lg text-blue-600 mb-1">{phrase.phrase}</div>
                      <div className="text-sm text-gray-600 line-clamp-2">
                        {phrase.explanation}
                      </div>
                    </motion.div>
                  ))}
                  {recentPhrases?.length === 0 && (
                    <div className="text-center py-8 text-gray-500">
                      <div className="text-4xl mb-2">ğŸ’¬</div>
                      Ù‡Ù†ÙˆØ² Ø¹Ø¨Ø§Ø±ØªÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª
                    </div>
                  )}
                </CardContent>
              </Card>
            </motion.div>
          </div>

          {/* Quick Actions */}
          <motion.div variants={itemVariants}>
            <Card className="modern-card">
              <CardHeader className="text-center border-b pb-6">
                <CardTitle className="text-2xl font-bold gradient-text">âš¡ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª Ø³Ø±ÛŒØ¹</CardTitle>
                <CardDescription>Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹ Ø¨Ù‡ Ø§Ù…Ú©Ø§Ù†Ø§Øª Ø§ØµÙ„ÛŒ Ø³ÛŒØ³ØªÙ…</CardDescription>
              </CardHeader>
              <CardContent className="pt-6 **:text-violet-600">
                <div className="grid gap-4 sm:grid-cols-3">
                  <Link href="/terms">
                    <Button className="w-full h-24 flex-col gap-3 modern-card hover-lift border-2 border-dashed border-blue-200 hover:border-blue-400">
                      <span className="text-3xl">ğŸ“–</span>
                      <span className="font-bold">Ø§ÙØ²ÙˆØ¯Ù† Ø§ØµØ·Ù„Ø§Ø­ Ø¬Ø¯ÛŒØ¯</span>
                    </Button>
                  </Link>
                  <Link href="/phrases">
                    <Button className="w-full h-24 flex-col gap-3 modern-card hover-lift border-2 border-dashed border-green-200 hover:border-green-400">
                      <span className="text-3xl">ğŸ’¬</span>
                      <span className="font-bold">Ø§ÙØ²ÙˆØ¯Ù† Ø¹Ø¨Ø§Ø±Øª Ø¬Ø¯ÛŒØ¯</span>
                    </Button>
                  </Link>
                  <Link href="/categories">
                    <Button className="w-full h-24 flex-col gap-3 modern-card hover-lift border-2 border-dashed border-purple-200 hover:border-purple-400">
                      <span className="text-3xl">ğŸ·ï¸</span>
                      <span className="font-bold">Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</span>
                    </Button>
                  </Link>
                </div>
              </CardContent>
            </Card>
          </motion.div>
        </motion.div>
      </main>
    </div>
  )
}
-----

the codes of file with route : /components/edit-category-dialog.tsx :
"use client";
import { useState, useEffect, useRef } from "react";
import { Button } from "./ui/button";
import { Input } from "./ui/input";
import { Label } from "./ui/label";
import { Card, CardContent, CardHeader, CardTitle } from "./ui/card";
import { Category } from "../types";
import { useToast } from "../hooks/use-toast";
import { motion } from "framer-motion";

interface EditCategoryDialogProps {
  category: Category;
  onClose: () => void;
  onSave: (categoryData: {
    name: string;
    description?: string;
    color: string;
  }) => Promise<void>;
}

const predefinedColors = [
  "#3B82F6", // blue
  "#EF4444", // red
  "#10B981", // green
  "#F59E0B", // amber
  "#8B5CF6", // violet
  "#EC4899", // pink
  "#06B6D4", // cyan
  "#84CC16", // lime
  "#F97316", // orange
  "#6366F1", // indigo
  "#14B8A6", // teal
  "#F43F5E", // rose
  "#8B5CF6", // purple
  "#06B6D4", // cyan
  "#D946EF", // fuchsia
];

export function EditCategoryDialog({
  category,
  onClose,
  onSave,
}: EditCategoryDialogProps) {
  const [name, setName] = useState(category.name);
  const [description, setDescription] = useState(category.description || "");
  const [selectedColor, setSelectedColor] = useState(category.color);
  const [isLoading, setIsLoading] = useState(false);
  const { toast } = useToast();

  const dialogRef = useRef<HTMLDivElement>(null);
  const firstInputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    firstInputRef.current?.focus();

    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === "Escape") {
        onClose();
      }
    };

    const handleClickOutside = (e: MouseEvent) => {
      if (dialogRef.current && !dialogRef.current.contains(e.target as Node)) {
        onClose();
      }
    };

    document.addEventListener("keydown", handleEscape);
    document.addEventListener("mousedown", handleClickOutside);

    return () => {
      document.removeEventListener("keydown", handleEscape);
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [onClose]);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!name.trim()) {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª",
        variant: "destructive",
      });
      return;
    }

    setIsLoading(true);

    try {
      await onSave({
        name: name.trim(),
        description: description.trim() || undefined,
        color: selectedColor,
      });
    } catch (error) {
      console.error("Error in dialog:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const handleColorChange = (color: string) => {
    setSelectedColor(color);
  };

  const getColorName = (color: string) => {
    const colorNames: { [key: string]: string } = {
      "#3B82F6": "Ø¢Ø¨ÛŒ",
      "#EF4444": "Ù‚Ø±Ù…Ø²",
      "#10B981": "Ø³Ø¨Ø²",
      "#F59E0B": "Ú©Ù‡Ø±Ø¨Ø§ÛŒÛŒ",
      "#8B5CF6": "Ø¨Ù†ÙØ´",
      "#EC4899": "ØµÙˆØ±ØªÛŒ",
      "#06B6D4": "ÙÛŒØ±ÙˆØ²Ù‡â€ŒØ§ÛŒ",
      "#84CC16": "Ù„ÛŒÙ…ÙˆÛŒÛŒ",
      "#F97316": "Ù†Ø§Ø±Ù†Ø¬ÛŒ",
      "#6366F1": "Ù†ÛŒÙ„ÛŒ",
      "#14B8A6": "Ø¢Ø¨ÛŒ Ø¯Ø±ÛŒØ§ÛŒÛŒ",
      "#F43F5E": "Ø±Ø²ÛŒ",
      "#D946EF": "Ø§Ø±Ú©ÛŒØ¯Ù‡",
    };
    return colorNames[color] || "Ø³ÙØ§Ø±Ø´ÛŒ";
  };

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
      <motion.div
        ref={dialogRef}
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        className="w-full max-w-md"
      >
        <Card className="shadow-2xl border-0 bg-linear-to-br from-white to-purple-50 max-h-[90vh] overflow-y-scroll">
          <CardHeader className="border-b border-gray-200">
            <CardTitle className="text-xl font-bold text-gray-800 flex items-center gap-2">
              âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
              <div
                className="w-6 h-6 rounded-full shadow-md"
                style={{ backgroundColor: selectedColor }}
              ></div>
            </CardTitle>
          </CardHeader>
          <CardContent className="p-6">
            <form onSubmit={handleSubmit} className="space-y-6">
              {/* Name Field */}
              <div className="space-y-2">
                <Label
                  htmlFor="edit-category-name"
                  className="text-sm font-medium text-gray-700"
                >
                  Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ *
                </Label>
                <Input
                  ref={firstInputRef}
                  id="edit-category-name"
                  type="text"
                  value={name}
                  onChange={(e) => setName(e.target.value)}
                  placeholder="Ù…Ø«Ø§Ù„: Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù‚Ù„Ø¨ Ùˆ Ø¹Ø±ÙˆÙ‚"
                  className="w-full text-right"
                  required
                />
              </div>

              {/* Description Field */}
              <div className="space-y-2">
                <Label
                  htmlFor="edit-category-description"
                  className="text-sm font-medium text-gray-700"
                >
                  ØªÙˆØ¶ÛŒØ­Ø§Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
                </Label>
                <textarea
                  id="edit-category-description"
                  value={description}
                  onChange={(e) => setDescription(e.target.value)}
                  placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ..."
                  rows={3}
                  className="w-full border border-gray-300 rounded-md p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-right"
                />
              </div>

              {/* Color Selection */}
              <div className="space-y-3">
                <Label className="text-sm font-medium text-gray-700">
                  Ø±Ù†Ú¯ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
                </Label>
                <div className="grid grid-cols-5 gap-3">
                  {predefinedColors?.map((color) => (
                    <motion.button
                      key={color}
                      type="button"
                      onClick={() => handleColorChange(color)}
                      whileHover={{ scale: 1.1 }}
                      whileTap={{ scale: 0.9 }}
                      className={`w-10 h-10 rounded-full border-2 transition-all duration-200 shadow-sm ${
                        selectedColor === color
                          ? "border-gray-800 shadow-lg scale-110 ring-2 ring-offset-2 ring-purple-200"
                          : "border-gray-300 hover:border-gray-400"
                      }`}
                      style={{ backgroundColor: color }}
                      aria-label={`Select color ${color}`}
                    />
                  ))}
                </div>
                <div className="flex items-center justify-between pt-2">
                  <div className="flex items-center gap-2">
                    <div
                      className="w-6 h-6 rounded-full shadow-md border"
                      style={{ backgroundColor: selectedColor }}
                    ></div>
                    <span className="text-sm text-gray-600 font-medium">
                      {getColorName(selectedColor)}
                    </span>
                  </div>
                  <span className="text-sm text-gray-500 font-mono">
                    {selectedColor}
                  </span>
                </div>
              </div>

              {/* Preview Section */}
              <div className="bg-gray-50 rounded-lg p-4 border">
                <h4 className="font-medium text-gray-700 mb-3">
                  ğŸ‘ï¸ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´:
                </h4>
                <div className="space-y-2">
                  <div className="flex items-center gap-3 p-3 bg-white rounded-lg border shadow-sm">
                    <div
                      className="w-4 h-4 rounded-full shadow-sm"
                      style={{ backgroundColor: selectedColor }}
                    ></div>
                    <div className="flex-1">
                      <h5 className="font-semibold text-gray-800 text-right">
                        {name || "Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ"}
                      </h5>
                      {description && (
                        <p className="text-sm text-gray-600 text-right mt-1">
                          {description}
                        </p>
                      )}
                    </div>
                  </div>
                  <div className="text-xs text-gray-500 text-center">
                    Ø§ÛŒÙ† Ù†Ù…Ø§ÛŒÛŒ Ø§Ø² Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù¾Ø³ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ Ø§Ø³Øª
                  </div>
                </div>
              </div>

              {/* Stats Preview */}
              <div className="bg-blue-50 rounded-lg p-4 border border-blue-200">
                <h4 className="font-medium text-blue-800 mb-2 flex items-center gap-2">
                  ğŸ“Š Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
                </h4>
                <div className="grid grid-cols-2 gap-3 text-sm">
                  <div className="text-center bg-white rounded p-2 border">
                    <div className="text-blue-600 font-bold">
                      {(category as any)._count?.terms || 0}
                    </div>
                    <div className="text-blue-700 text-xs">Ø§ØµØ·Ù„Ø§Ø­Ø§Øª</div>
                  </div>
                  <div className="text-center bg-white rounded p-2 border">
                    <div className="text-green-600 font-bold">
                      {(category as any)._count?.phrases || 0}
                    </div>
                    <div className="text-green-700 text-xs">Ø¹Ø¨Ø§Ø±Ø§Øª</div>
                  </div>
                </div>
                <div className="text-xs text-blue-600 mt-2 text-center">
                  Ø§ÛŒÙ† Ø§Ø¹Ø¯Ø§Ø¯ Ù¾Ø³ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª Ø¨Ù‡â€ŒØ±ÙˆØ² Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
                </div>
              </div>

              {/* Action Buttons */}
              <div className="flex gap-3 pt-4">
                <Button
                  type="button"
                  onClick={onClose}
                  variant="outline"
                  className="flex-1 border-gray-300 text-gray-700 hover:bg-gray-50"
                  disabled={isLoading}
                >
                  Ø§Ù†ØµØ±Ø§Ù
                </Button>
                <Button
                  type="submit"
                  className="flex-1 bg-purple-600 hover:bg-purple-700 text-white shadow-lg transition-all duration-200 hover:scale-105"
                  disabled={isLoading || !name.trim()}
                >
                  {isLoading ? (
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                      <span>Ø¯Ø± Ø­Ø§Ù„ Ø°Ø®ÛŒØ±Ù‡...</span>
                    </div>
                  ) : (
                    "ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª"
                  )}
                </Button>
              </div>
            </form>
          </CardContent>
        </Card>
      </motion.div>
    </div>
  );
}

-----

the codes of file with route : /components/edit-phrase-dialog.tsx :
"use client";
import { useState, useEffect, useRef } from "react";
import { Button } from "./ui/button";
import { Input } from "./ui/input";
import { Label } from "./ui/label";
import { Card, CardContent, CardHeader, CardTitle } from "./ui/card";
import { MedicalPhrase, Category } from "../types";
import { useToast } from "../hooks/use-toast";
import { motion } from "framer-motion";

interface EditPhraseDialogProps {
  phrase: MedicalPhrase;
  onClose: () => void;
  onSave: (phraseData: {
    phrase: string;
    explanation: string;
    context?: string;
    categories: string[];
  }) => void;
}

export function EditPhraseDialog({ phrase, onClose, onSave }: EditPhraseDialogProps) {
  const [phraseText, setPhraseText] = useState(phrase.phrase);
  const [explanation, setExplanation] = useState(phrase.explanation);
  // const [context, setContext] = useState(phrase.context || "");
  const [categories, setCategories] = useState<Category[]>([]);
  const [selectedCategories, setSelectedCategories] = useState<string[]>(
    phrase.categories?.map(cat => cat.id)
  );
  const [isLoading, setIsLoading] = useState(false);
  const [isCategoriesLoading, setIsCategoriesLoading] = useState(true);
  const { toast } = useToast();
  
  const dialogRef = useRef<HTMLDivElement>(null);
  const firstInputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    firstInputRef.current?.focus();
    fetchCategories();
    
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape') {
        onClose();
      }
    };

    const handleClickOutside = (e: MouseEvent) => {
      if (dialogRef.current && !dialogRef.current.contains(e.target as Node)) {
        onClose();
      }
    };

    document.addEventListener('keydown', handleEscape);
    document.addEventListener('mousedown', handleClickOutside);

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, [onClose]);

  const fetchCategories = async () => {
    try {
      const response = await fetch("/api/categories");
      if (response.ok) {
        const data = await response.json();
        setCategories(data.data || []);
      }
    } catch (error) {
      console.error("Error fetching categories:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¢Ù…Ø¯",
        variant: "destructive",
      });
    } finally {
      setIsCategoriesLoading(false);
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!phraseText.trim() || !explanation.trim()) {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ø¹Ø¨Ø§Ø±Øª Ùˆ ØªÙˆØ¶ÛŒØ­ Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯",
        variant: "destructive",
      });
      return;
    }

    setIsLoading(true);
    
    try {
      await onSave({
        phrase: phraseText.trim(),
        explanation: explanation.trim(),
        // context: context.trim() || undefined,
        categories: selectedCategories,
      });
    } catch (error) {
      console.error("Error in dialog:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const toggleCategory = (categoryId: string) => {
    setSelectedCategories(prev =>
      prev.includes(categoryId)
        ? prev.filter(id => id !== categoryId)
        : [...prev, categoryId]
    );
  };

  const speakText = (text: string) => {
    if ('speechSynthesis' in window) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'en-US';
      utterance.rate = 0.8;
      speechSynthesis.speak(utterance);
    } else {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Ù‚Ø§Ø¨Ù„ÛŒØª Ù¾Ø®Ø´ ØµØ¯Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯",
        variant: "destructive",
      });
    }
  };

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
      <motion.div
        ref={dialogRef}
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        className="w-full max-w-2xl max-h-[90vh] overflow-y-auto"
      >
        <Card className="shadow-2xl border-0 bg-linear-to-br from-white to-green-50">
          <CardHeader className="border-b border-gray-200">
            <CardTitle className="text-xl font-bold text-gray-800 flex items-center gap-2">
              âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ Ø¹Ø¨Ø§Ø±Øª
              <Button
                variant="ghost"
                size="sm"
                onClick={() => speakText(phraseText)}
                className="h-8 w-8 p-0 hover:bg-green-100"
              >
                ğŸ”Š
              </Button>
            </CardTitle>
          </CardHeader>
          <CardContent className="p-6">
            <form onSubmit={handleSubmit} className="space-y-6">
              {/* Phrase Field */}
              <div className="space-y-2">
                <Label htmlFor="edit-phrase" className="text-sm font-medium text-gray-700">
                  Ø¹Ø¨Ø§Ø±Øª *
                </Label>
                <Input
                  ref={firstInputRef}
                  id="edit-phrase"
                  type="text"
                  value={phraseText}
                  onChange={(e) => setPhraseText(e.target.value)}
                  placeholder="Ù…Ø«Ø§Ù„: How are you feeling today?"
                  className="w-full text-right"
                  required
                />
              </div>

              {/* Explanation Field */}
              <div className="space-y-2">
                <Label htmlFor="edit-explanation" className="text-sm font-medium text-gray-700">
                  ØªÙˆØ¶ÛŒØ­ *
                </Label>
                <Input
                  id="edit-explanation"
                  type="text"
                  value={explanation}
                  onChange={(e) => setExplanation(e.target.value)}
                  placeholder="Ù…Ø«Ø§Ù„: Ø­Ø§Ù„ØªØ§Ù† Ø§Ù…Ø±ÙˆØ² Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ"
                  className="w-full text-right"
                  required
                />
              </div>

              {/* Context Field */}
              <div className="space-y-2">
                <Label htmlFor="edit-context" className="text-sm font-medium text-gray-700">
                  Ø²Ù…ÛŒÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
                </Label>
                {/* <textarea
                  id="edit-context"
                  value={context}
                  onChange={(e) => setContext(e.target.value)}
                  placeholder="Ø´Ø±Ø§ÛŒØ· Ùˆ Ø²Ù…ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ø§ÛŒÙ† Ø¹Ø¨Ø§Ø±Øª Ø¯Ø± Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯..."
                  rows={3}
                  className="w-full border border-gray-300 rounded-md p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-right"
                /> */}
              </div>

              {/* Categories Selection */}
              <div className="space-y-3">
                <Label className="text-sm font-medium text-gray-700">
                  Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
                </Label>
                {isCategoriesLoading ? (
                  <div className="grid grid-cols-2 gap-2">
                    {[...Array(4)]?.map((_, i) => (
                      <div key={i} className="h-10 bg-gray-200 rounded-md animate-pulse"></div>
                    ))}
                  </div>
                ) : categories?.length === 0 ? (
                  <p className="text-sm text-muted-foreground text-center py-4">
                    Ù‡ÛŒÚ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯.
                  </p>
                ) : (
                  <div className="grid grid-cols-2 gap-2">
                    {categories?.map((category) => (
                      <motion.div
                        key={category.id}
                        whileHover={{ scale: 1.02 }}
                        whileTap={{ scale: 0.98 }}
                        className={`flex items-center gap-2 p-3 border rounded-md cursor-pointer transition-all ${
                          selectedCategories.includes(category.id)
                            ? 'border-green-500 bg-green-50 shadow-sm'
                            : 'border-gray-200 hover:border-gray-300'
                        }`}
                        onClick={() => toggleCategory(category.id)}
                      >
                        <div
                          className="w-3 h-3 rounded-full shadow-sm"
                          style={{ backgroundColor: category.color }}
                        ></div>
                        <span className="text-sm flex-1 text-right">{category.name}</span>
                        {selectedCategories.includes(category.id) && (
                          <div className="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center">
                            <span className="text-white text-xs">âœ“</span>
                          </div>
                        )}
                      </motion.div>
                    ))}
                  </div>
                )}
              </div>

              {/* Preview Section */}
              <div className="bg-gray-50 rounded-lg p-4 border">
                <h4 className="font-medium text-gray-700 mb-3">ğŸ“‹ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´:</h4>
                <div className="space-y-3">
                  <div>
                    <span className="text-sm text-gray-600">Ø¹Ø¨Ø§Ø±Øª:</span>
                    <p className="font-medium text-gray-800 text-lg">{phraseText || "---"}</p>
                  </div>
                  <div>
                    <span className="text-sm text-gray-600">ØªÙˆØ¶ÛŒØ­:</span>
                    <p className="font-medium text-gray-800">{explanation || "---"}</p>
                  </div>
                  {/* {context && (
                    <div>
                      <span className="text-sm text-gray-600">Ø²Ù…ÛŒÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡:</span>
                      <p className="text-gray-700 text-sm mt-1">{context}</p>
                    </div>
                  )} */}
                  {selectedCategories?.length > 0 && (
                    <div>
                      <span className="text-sm text-gray-600">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§:</span>
                      <div className="flex flex-wrap gap-1 mt-2">
                        {selectedCategories?.map(catId => {
                          const category = categories.find(c => c.id === catId);
                          return category ? (
                            <span
                              key={category.id}
                              className="px-2 py-1 text-xs rounded-full text-white font-medium"
                              style={{ backgroundColor: category.color }}
                            >
                              {category.name}
                            </span>
                          ) : null;
                        })}
                      </div>
                    </div>
                  )}
                </div>
              </div>

              {/* Action Buttons */}
              <div className="flex gap-3 pt-4">
                <Button
                  type="button"
                  onClick={onClose}
                  variant="outline"
                  className="flex-1 border-gray-300 text-gray-700 hover:bg-gray-50"
                  disabled={isLoading}
                >
                  Ø§Ù†ØµØ±Ø§Ù
                </Button>
                <Button
                  type="submit"
                  className="flex-1 bg-green-600 hover:bg-green-700 text-white shadow-lg transition-all duration-200 hover:scale-105"
                  disabled={isLoading || !phraseText.trim() || !explanation.trim()}
                >
                  {isLoading ? (
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                      <span>Ø¯Ø± Ø­Ø§Ù„ Ø°Ø®ÛŒØ±Ù‡...</span>
                    </div>
                  ) : (
                    "ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª"
                  )}
                </Button>
              </div>
            </form>
          </CardContent>
        </Card>
      </motion.div>
    </div>
  );
}
-----

the codes of file with route : /components/edit-term-dialog.tsx :
"use client";
import { useState, useEffect, useRef } from "react";
import { Button } from "./ui/button";
import { Input } from "./ui/input";
import { Label } from "./ui/label";
import { Card, CardContent, CardHeader, CardTitle } from "./ui/card";
import { MedicalTerm, Category } from "../types";
import { useToast } from "../hooks/use-toast";
import { motion } from "framer-motion";

interface EditTermDialogProps {
  term: MedicalTerm;
  onClose: () => void;
  onSave: (termData: {
    term: string;
    meaning: string;
    pronunciation?: string;
    explanation?: string;
    categories: string[];
  }) => void;
}

export function EditTermDialog({ term, onClose, onSave }: EditTermDialogProps) {
  const [termText, setTermText] = useState(term.term);
  const [meaning, setMeaning] = useState(term.meaning);
  const [pronunciation, setPronunciation] = useState(term.pronunciation || "");
  // const [explanation, setExplanation] = useState(term.explanation || "");
  const [categories, setCategories] = useState<Category[]>([]);
  const [selectedCategories, setSelectedCategories] = useState<string[]>(
    term.categories?.map((cat) => cat.id)
  );
  const [isLoading, setIsLoading] = useState(false);
  const [isCategoriesLoading, setIsCategoriesLoading] = useState(true);
  const { toast } = useToast();

  const dialogRef = useRef<HTMLDivElement>(null);
  const firstInputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    firstInputRef.current?.focus();
    fetchCategories();

    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === "Escape") {
        onClose();
      }
    };

    const handleClickOutside = (e: MouseEvent) => {
      if (dialogRef.current && !dialogRef.current.contains(e.target as Node)) {
        onClose();
      }
    };

    document.addEventListener("keydown", handleEscape);
    document.addEventListener("mousedown", handleClickOutside);

    return () => {
      document.removeEventListener("keydown", handleEscape);
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [onClose]);

  const fetchCategories = async () => {
    try {
      const response = await fetch("/api/categories");
      if (response.ok) {
        const data = await response.json();
        setCategories(data.data || []);
      }
    } catch (error) {
      console.error("Error fetching categories:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¢Ù…Ø¯",
        variant: "destructive",
      });
    } finally {
      setIsCategoriesLoading(false);
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!termText.trim() || !meaning.trim()) {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ø§ØµØ·Ù„Ø§Ø­ Ùˆ Ù…Ø¹Ù†ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯",
        variant: "destructive",
      });
      return;
    }

    setIsLoading(true);

    try {
      await onSave({
        term: termText.trim(),
        meaning: meaning.trim(),
        pronunciation: pronunciation.trim() || undefined,
        // explanation: explanation.trim() || undefined,
        categories: selectedCategories,
      });
    } catch (error) {
      console.error("Error in dialog:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const toggleCategory = (categoryId: string) => {
    setSelectedCategories((prev) =>
      prev.includes(categoryId)
        ? prev.filter((id) => id !== categoryId)
        : [...prev, categoryId]
    );
  };

  const speakText = (text: string) => {
    if ("speechSynthesis" in window) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "en-US";
      utterance.rate = 0.8;
      speechSynthesis.speak(utterance);
    } else {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Ù‚Ø§Ø¨Ù„ÛŒØª Ù¾Ø®Ø´ ØµØ¯Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯",
        variant: "destructive",
      });
    }
  };

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
      <motion.div
        ref={dialogRef}
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        className="w-full max-w-2xl max-h-[90vh] overflow-y-auto"
      >
        <Card className="shadow-2xl border-0 bg-linear-to-br from-white to-blue-50">
          <CardHeader className="border-b border-gray-200">
            <CardTitle className="text-xl font-bold text-gray-800 flex items-center gap-2">
              âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ Ø§ØµØ·Ù„Ø§Ø­
              <Button
                variant="ghost"
                size="sm"
                onClick={() => speakText(termText)}
                className="h-8 w-8 p-0 hover:bg-blue-100"
              >
                ğŸ”Š
              </Button>
            </CardTitle>
          </CardHeader>
          <CardContent className="p-6">
            <form onSubmit={handleSubmit} className="space-y-6">
              {/* Term Field */}
              <div className="space-y-2">
                <Label
                  htmlFor="edit-term"
                  className="text-sm font-medium text-gray-700"
                >
                  Ø§ØµØ·Ù„Ø§Ø­ *
                </Label>
                <Input
                  ref={firstInputRef}
                  id="edit-term"
                  type="text"
                  value={termText}
                  onChange={(e) => setTermText(e.target.value)}
                  placeholder="Ù…Ø«Ø§Ù„: Hypertension"
                  className="w-full text-right"
                  required
                />
              </div>

              {/* Meaning Field */}
              <div className="space-y-2">
                <Label
                  htmlFor="edit-meaning"
                  className="text-sm font-medium text-gray-700"
                >
                  Ù…Ø¹Ù†ÛŒ *
                </Label>
                <Input
                  id="edit-meaning"
                  type="text"
                  value={meaning}
                  onChange={(e) => setMeaning(e.target.value)}
                  placeholder="Ù…Ø«Ø§Ù„: ÙØ´Ø§Ø± Ø®ÙˆÙ† Ø¨Ø§Ù„Ø§"
                  className="w-full text-right"
                  required
                />
              </div>

              {/* Pronunciation Field */}
              <div className="space-y-2">
                <Label
                  htmlFor="edit-pronunciation"
                  className="text-sm font-medium text-gray-700"
                >
                  ØªÙ„ÙØ¸ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
                </Label>
                <Input
                  id="edit-pronunciation"
                  type="text"
                  value={pronunciation}
                  onChange={(e) => setPronunciation(e.target.value)}
                  placeholder="Ù…Ø«Ø§Ù„: /ËŒhaÉª.pÉ™rËˆten.ÊƒÉ™n/"
                  className="w-full text-right"
                />
              </div>

              {/* Explanation Field */}
              <div className="space-y-2">
                <Label
                  htmlFor="edit-explanation"
                  className="text-sm font-medium text-gray-700"
                >
                  ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨ÛŒØ´ØªØ± (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
                </Label>
                {/* <textarea
                  id="edit-explanation"
                  value={explanation}
                  onChange={(e) => setExplanation(e.target.value)}
                  placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ø§Ù…Ù„â€ŒØªØ± Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø§ÛŒÙ† Ø§ØµØ·Ù„Ø§Ø­..."
                  rows={3}
                  className="w-full border border-gray-300 rounded-md p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-right"
                /> */}
              </div>

              {/* Categories Selection */}
              <div className="space-y-3">
                <Label className="text-sm font-medium text-gray-700">
                  Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
                </Label>
                {isCategoriesLoading ? (
                  <div className="grid grid-cols-2 gap-2">
                    {[...Array(4)]?.map((_, i) => (
                      <div
                        key={i}
                        className="h-10 bg-gray-200 rounded-md animate-pulse"
                      ></div>
                    ))}
                  </div>
                ) : categories?.length === 0 ? (
                  <p className="text-sm text-muted-foreground text-center py-4">
                    Ù‡ÛŒÚ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯.
                  </p>
                ) : (
                  <div className="grid grid-cols-2 gap-2">
                    {categories?.map((category) => (
                      <motion.div
                        key={category.id}
                        whileHover={{ scale: 1.02 }}
                        whileTap={{ scale: 0.98 }}
                        className={`flex items-center gap-2 p-3 border rounded-md cursor-pointer transition-all ${
                          selectedCategories.includes(category.id)
                            ? "border-blue-500 bg-blue-50 shadow-sm"
                            : "border-gray-200 hover:border-gray-300"
                        }`}
                        onClick={() => toggleCategory(category.id)}
                      >
                        <div
                          className="w-3 h-3 rounded-full shadow-sm"
                          style={{ backgroundColor: category.color }}
                        ></div>
                        <span className="text-sm flex-1 text-right">
                          {category.name}
                        </span>
                        {selectedCategories.includes(category.id) && (
                          <div className="w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center">
                            <span className="text-white text-xs">âœ“</span>
                          </div>
                        )}
                      </motion.div>
                    ))}
                  </div>
                )}
              </div>

              {/* Action Buttons */}
              <div className="flex gap-3 pt-4">
                <Button
                  type="button"
                  onClick={onClose}
                  variant="outline"
                  className="flex-1 border-gray-300 text-gray-700 hover:bg-gray-50"
                  disabled={isLoading}
                >
                  Ø§Ù†ØµØ±Ø§Ù
                </Button>
                <Button
                  type="submit"
                  className="flex-1 bg-blue-600 hover:bg-blue-700 text-white shadow-lg transition-all duration-200 hover:scale-105"
                  disabled={isLoading || !termText.trim() || !meaning.trim()}
                >
                  {isLoading ? (
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                      <span>Ø¯Ø± Ø­Ø§Ù„ Ø°Ø®ÛŒØ±Ù‡...</span>
                    </div>
                  ) : (
                    "ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª"
                  )}
                </Button>
              </div>
            </form>
          </CardContent>
        </Card>
      </motion.div>
    </div>
  );
}

-----

the codes of file with route : /components/import-from-json-dialog.tsx :
"use client";
import { useState, useEffect } from "react";
import { Button } from "./ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "./ui/card";
import { Input } from "./ui/input";
import { useToast } from "../hooks/use-toast";
import { motion } from "framer-motion";
import { Category } from "../types";

interface ImportFromJsonDialogProps {
  onClose: () => void;
  onImport: () => void;
  type: "terms" | "phrases";
}

export function ImportFromJsonDialog({
  onClose,
  onImport,
  type,
}: ImportFromJsonDialogProps) {
  const [jsonText, setJsonText] = useState("");
  const [globalCategories, setGlobalCategories] = useState<string[]>([]);
  const [availableCategories, setAvailableCategories] = useState<Category[]>(
    []
  );
  const [newCategory, setNewCategory] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [isCategoriesLoading, setIsCategoriesLoading] = useState(true);
  const { toast } = useToast();

  useEffect(() => {
    fetchCategories();
  }, []);

  const fetchCategories = async () => {
    try {
      const response = await fetch("/api/categories");
      if (response.ok) {
        const data = await response.json();
        setAvailableCategories(data.data || []);
      }
    } catch (error) {
      console.error("Error fetching categories:", error);
    } finally {
      setIsCategoriesLoading(false);
    }
  };

  const handleImport = async () => {
    if (!jsonText.trim()) {
      toast({
        title: "Ø®Ø·Ø§",
        description: "Ù„Ø·ÙØ§ Ù…Ø­ØªÙˆØ§ÛŒ JSON Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",
        variant: "destructive",
      });
      return;
    }

    try {
      setIsLoading(true);
      const parsedData = JSON.parse(jsonText);

      // Support both array format and object with items
      const items = Array.isArray(parsedData) ? parsedData : parsedData.items;

      if (!Array.isArray(items)) {
        throw new Error(
          "Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø¢Ø±Ø§ÛŒÙ‡ ÛŒØ§ Ø¢Ø¨Ø¬Ú©Øª Ø¨Ø§ ÙÛŒÙ„Ø¯ items Ø¨Ø§Ø´Ù†Ø¯"
        );
      }

      // Validate each item based on type
      for (const item of items) {
        if (type === "terms") {
          if (!item.term || !item.meaning) {
            throw new Error("Ù‡Ø± Ø§ØµØ·Ù„Ø§Ø­ Ø¨Ø§ÛŒØ¯ Ø¯Ø§Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ term Ùˆ meaning Ø¨Ø§Ø´Ø¯");
          }
        } else {
          if (!item.phrase || !item.explanation) {
            throw new Error(
              "Ù‡Ø± Ø¹Ø¨Ø§Ø±Øª Ø¨Ø§ÛŒØ¯ Ø¯Ø§Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ phrase Ùˆ explanation Ø¨Ø§Ø´Ø¯"
            );
          }
        }
      }

      // Send to API with globalCategories
      const response = await fetch(`/api/${type}/import`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          items,
          globalCategories:
            globalCategories.length > 0 ? globalCategories : undefined,
        }),
      });

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.error || "Ø®Ø·Ø§ Ø¯Ø± ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§");
      }

      toast({
        title: "Ù…ÙˆÙÙ‚",
        description: `${items.length} ${
          type === "terms" ? "Ø§ØµØ·Ù„Ø§Ø­" : "Ø¹Ø¨Ø§Ø±Øª"
        } Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆØ§Ø±Ø¯ Ø´Ø¯`,
      });

      onImport();
      onClose();
    } catch (error: any) {
      console.error("Error importing data:", error);
      toast({
        title: "Ø®Ø·Ø§",
        description: error.message || "Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ JSON",
        variant: "destructive",
      });
    } finally {
      setIsLoading(false);
    }
  };

  const toggleGlobalCategory = (categoryName: string) => {
    setGlobalCategories((prev) =>
      prev.includes(categoryName)
        ? prev.filter((name) => name !== categoryName)
        : [...prev, categoryName]
    );
  };

  const addNewCategory = () => {
    if (newCategory.trim() && !globalCategories.includes(newCategory.trim())) {
      setGlobalCategories((prev) => [...prev, newCategory.trim()]);
      setNewCategory("");
    }
  };

  const removeGlobalCategory = (categoryName: string) => {
    setGlobalCategories((prev) => prev.filter((name) => name !== categoryName));
  };

  const handleExample = () => {
    const example =
      type === "terms"
        ? JSON.stringify(
            [
              {
                term: "Hypertension",
                meaning: "ÙØ´Ø§Ø± Ø®ÙˆÙ† Ø¨Ø§Ù„Ø§",
                pronunciation: "/ËŒhaÉª.pÉ™rËˆten.ÊƒÉ™n/",
                explanation:
                  "Ø´Ø±Ø§ÛŒØ·ÛŒ Ú©Ù‡ Ø¯Ø± Ø¢Ù† ÙØ´Ø§Ø± Ø®ÙˆÙ† Ø¯Ø± Ø´Ø±ÛŒØ§Ù†â€ŒÙ‡Ø§ Ø¨Ù‡ Ø·ÙˆØ± Ù…Ø¯Ø§ÙˆÙ… Ø¨Ø§Ù„Ø§ Ø§Ø³Øª",
              },
              {
                term: "Tachycardia",
                meaning: "ØªÙ†Ø¯ØªÙ¾Ø´ÛŒ",
                pronunciation: "/tÃ¦k.ÉªËˆkÉ‘Ër.di.É™/",
                explanation: "Ø¶Ø±Ø¨Ø§Ù† Ù‚Ù„Ø¨ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø§Ø² Ø­Ø§Ù„Øª Ø·Ø¨ÛŒØ¹ÛŒ",
              },
            ],
            null,
            2
          )
        : JSON.stringify(
            [
              {
                phrase: "How are you feeling today?",
                explanation: "Ø­Ø§Ù„ØªØ§Ù† Ø§Ù…Ø±ÙˆØ² Ú†Ø·ÙˆØ± Ø§Ø³ØªØŸ",
                context: "Ù¾Ø±Ø³Ø´ Ù…Ø¹Ù…ÙˆÙ„ Ø§Ø² Ø¨ÛŒÙ…Ø§Ø± Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø­Ø§Ù„ Ø¹Ù…ÙˆÙ…ÛŒ",
              },
              {
                phrase: "Take a deep breath",
                explanation: "ÛŒÚ© Ù†ÙØ³ Ø¹Ù…ÛŒÙ‚ Ø¨Ú©Ø´ÛŒØ¯",
                context: "Ø¯Ø³ØªÙˆØ± Ø¨Ù‡ Ø¨ÛŒÙ…Ø§Ø± Ù‡Ù†Ú¯Ø§Ù… Ù…Ø¹Ø§ÛŒÙ†Ù‡ Ø±ÛŒÙ‡",
              },
            ],
            null,
            2
          );

    setJsonText(example);
  };

  const handleClear = () => {
    setJsonText("");
    setGlobalCategories([]);
  };

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        className="w-full max-w-6xl max-h-[90vh] overflow-hidden overflow-y-scroll"
      >
        <Card className="w-full h-full flex flex-col">
          <CardHeader className="border-b bg-linear-to-r from-green-50 to-blue-50">
            <CardTitle className="text-xl flex items-center gap-2">
              ğŸ“¥ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† {type === "terms" ? "Ø§ØµØ·Ù„Ø§Ø­Ø§Øª" : "Ø¹Ø¨Ø§Ø±Ø§Øª"} Ø§Ø² JSON
            </CardTitle>
            <CardDescription>
              Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø´ØªØ±Ú© Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ Ùˆ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ JSON Ø±Ø§ ÙˆØ§Ø±Ø¯ Ù†Ù…Ø§ÛŒÛŒØ¯
            </CardDescription>
          </CardHeader>
          <CardContent className="flex-1 overflow-hidden flex flex-col gap-4 p-6">
            {/* Global Categories Section */}
            <div className="bg-purple-50 border border-purple-200 rounded-lg p-4">
              <h4 className="font-medium text-purple-800 mb-3 flex items-center gap-2">
                ğŸ·ï¸ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø´ØªØ±Ú©
              </h4>
              <p className="text-sm text-purple-600 mb-3">
                Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø¨Ù‡ Ù‡Ù…Ù‡ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯
              </p>

              {/* Selected Global Categories */}
              {globalCategories.length > 0 && (
                <div className="flex flex-wrap gap-2 mb-4">
                  {globalCategories.map((categoryName) => (
                    <motion.span
                      key={categoryName}
                      initial={{ scale: 0.8 }}
                      animate={{ scale: 1 }}
                      className="inline-flex items-center gap-1 bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm"
                    >
                      {categoryName}
                      <button
                        onClick={() => removeGlobalCategory(categoryName)}
                        className="hover:text-purple-900 text-xs"
                      >
                        âœ•
                      </button>
                    </motion.span>
                  ))}
                </div>
              )}

              {/* Available Categories */}
              <div>
                {isCategoriesLoading ? (
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                    {[...Array(8)].map((_, i) => (
                      <div
                        key={i}
                        className="h-8 bg-purple-200 rounded animate-pulse"
                      ></div>
                    ))}
                  </div>
                ) : availableCategories.length === 0 ? (
                  <p className="text-sm text-purple-600 text-center py-2">
                    Ù‡ÛŒÚ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª
                  </p>
                ) : (
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                    {availableCategories.map((category) => (
                      <motion.label
                        key={category.id}
                        whileHover={{ scale: 1.02 }}
                        whileTap={{ scale: 0.98 }}
                        className={`flex items-center gap-2 p-2 border rounded-lg cursor-pointer transition-all ${
                          globalCategories.includes(category.name)
                            ? "border-purple-500 bg-purple-100 shadow-sm"
                            : "border-gray-200 hover:border-gray-300 bg-white"
                        }`}
                      >
                        <input
                          type="checkbox"
                          checked={globalCategories.includes(category.name)}
                          onChange={() => toggleGlobalCategory(category.name)}
                          className="rounded text-purple-600 focus:ring-purple-500"
                        />
                        <div
                          className="w-3 h-3 rounded-full shadow-sm"
                          style={{ backgroundColor: category.color }}
                        ></div>
                        <span className="text-sm flex-1 text-right">
                          {category.name}
                        </span>
                      </motion.label>
                    ))}
                  </div>
                )}
              </div>
            </div>

            {/* JSON Input Section */}
            <div className="space-y-3 flex-1 flex flex-col">
              <div className="flex justify-between items-center">
                <label className="text-sm font-medium">
                  Ù…Ø­ØªÙˆØ§ÛŒ JSON ({type === "terms" ? "Ø§ØµØ·Ù„Ø§Ø­Ø§Øª" : "Ø¹Ø¨Ø§Ø±Ø§Øª"})
                </label>
                <div className="flex gap-2">
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={handleExample}
                    className="text-xs"
                  >
                    ğŸ¯ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù†Ù…ÙˆÙ†Ù‡
                  </Button>
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={handleClear}
                    className="text-xs"
                  >
                    ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡
                  </Button>
                </div>
              </div>
              <div className="flex-1 min-h-0">
                <textarea
                  value={jsonText}
                  onChange={(e) => setJsonText(e.target.value)}
                  placeholder={`// Ø³Ø§Ø®ØªØ§Ø± Ø³Ø§Ø¯Ù‡ - Ø¢Ø±Ø§ÛŒÙ‡â€ŒØ§ÛŒ Ø§Ø² ${
                    type === "terms" ? "Ø§ØµØ·Ù„Ø§Ø­Ø§Øª" : "Ø¹Ø¨Ø§Ø±Ø§Øª"
                  }\n// Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² ÙÛŒÙ„Ø¯ categories Ø¯Ø± Ù‡Ø± Ø¢ÛŒØªÙ… Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯\n\n[\n  {\n    "${
                    type === "terms" ? "term" : "phrase"
                  }": "...",\n    "${
                    type === "terms" ? "meaning" : "explanation"
                  }": "...",\n    "categories": ["Ø¯Ø³ØªÙ‡â€ŒØ§Ø®ØªØµØ§ØµÛŒ"]\n  }\n]`}
                  className="w-full h-full p-4 border border-gray-300 rounded-lg font-mono text-sm leading-relaxed"
                  rows={10}
                  dir="ltr"
                />
              </div>
            </div>

            {/* Preview Section */}
            {globalCategories.length > 0 && (
              <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                <h4 className="font-medium text-green-800 mb-2 flex items-center gap-2">
                  ğŸ‘ï¸ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
                </h4>
                <p className="text-sm text-green-600 mb-2">
                  Ù‡Ù…Ù‡ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ù‡ Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯:
                </p>
                <div className="flex flex-wrap gap-2">
                  {globalCategories.map((categoryName) => {
                    const category = availableCategories.find(
                      (c) => c.name === categoryName
                    );
                    return (
                      <span
                        key={categoryName}
                        className="inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium text-white shadow-sm"
                        style={{
                          backgroundColor: category?.color || "#6B7280",
                        }}
                      >
                        {categoryName}
                        {category && (
                          <div className="w-2 h-2 rounded-full bg-white/80"></div>
                        )}
                      </span>
                    );
                  })}
                </div>
              </div>
            )}

            {/* Instructions */}
            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
              <h4 className="font-medium text-blue-800 mb-2 flex items-center gap-2">
                ğŸ’¡ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø³Ø±ÛŒØ¹
              </h4>
              <ul className="text-blue-600 text-sm space-y-1 list-disc list-inside">
                <li>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø´ØªØ±Ú© Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
                <li>
                  Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² ÙÛŒÙ„Ø¯ <code>categories</code> Ø¯Ø± JSON Ø¨Ø±Ø§ÛŒ
                  Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ Ù‡Ø± Ø¢ÛŒØªÙ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
                </li>
                <li>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ø·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
              </ul>
            </div>

            {/* Action Buttons */}
            <div className="flex gap-3 justify-end pt-4 border-t">
              <Button
                variant="outline"
                onClick={onClose}
                disabled={isLoading}
                className="min-w-24"
              >
                Ù„ØºÙˆ
              </Button>
              <Button
                onClick={handleImport}
                disabled={isLoading || !jsonText.trim()}
                className="bg-green-600 hover:bg-green-700 min-w-32 shadow-lg transition-all duration-200 hover:scale-105"
              >
                {isLoading ? (
                  <div className="flex items-center gap-2">
                    <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                    <span>Ø¯Ø± Ø­Ø§Ù„ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù†...</span>
                  </div>
                ) : (
                  `ğŸ“¥ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† ${type === "terms" ? "Ø§ØµØ·Ù„Ø§Ø­Ø§Øª" : "Ø¹Ø¨Ø§Ø±Ø§Øª"}`
                )}
              </Button>
            </div>
          </CardContent>
        </Card>
      </motion.div>
    </div>
  );
}

-----

the codes of file with route : /components/login-form.tsx :
'use client'

import { useState } from 'react'
import { useAuth } from './auth-provider'
import { Button } from './ui/button'
import { Input } from './ui/input'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card'
import { motion } from 'framer-motion'

export function LoginForm() {
  const [username, setUsername] = useState('')
  const [password, setPassword] = useState('')
  const [isLoading, setIsLoading] = useState(false)
  const { login } = useAuth()

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setIsLoading(true)
    
    const success = await login(username, password)
    if (!success) {
      alert('ÙˆØ±ÙˆØ¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯! Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.')
    }
    
    setIsLoading(false)
  }

  return (
    <div className="min-h-screen flex items-center justify-center p-4">
      <div className="absolute inset-0 bg-linear-to-br from-blue-400 via-blue-500 to-cyan-500"></div>
      
      {/* Ø¹Ù†Ø§ØµØ± Ø¯Ú©ÙˆØ±Ø§ØªÛŒÙˆ */}
      <div className="absolute top-10 left-10 text-6xl opacity-20 animate-float">â¤ï¸</div>
      <div className="absolute top-20 right-20 text-4xl opacity-30 animate-float" style={{animationDelay: '1s'}}>ğŸ’Š</div>
      <div className="absolute bottom-20 left-20 text-5xl opacity-25 animate-float" style={{animationDelay: '2s'}}>ğŸ©º</div>
      <div className="absolute bottom-10 right-10 text-3xl opacity-20 animate-float" style={{animationDelay: '1.5s'}}>ğŸ¥</div>

      <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
        className="relative z-10 w-full max-w-md"
      >
        <Card className="glass border-0 shadow-2xl">
          <CardHeader className="space-y-1 text-center pb-8">
            <motion.div
              initial={{ scale: 0 }}
              animate={{ scale: 1 }}
              transition={{ delay: 0.2, type: "spring", stiffness: 200 }}
            >
              <div className="text-6xl mb-4 heart-beat">ğŸ¥</div>
            </motion.div>
            <CardTitle className="text-3xl font-bold gradient-text">
              Ø³ÛŒØ³ØªÙ… Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ
            </CardTitle>
            <CardDescription className="text-gray-600 text-lg">
              Ø¨Ù‡ Ù¾Ù†Ù„ ØªØ®ØµØµÛŒ Ù¾Ø²Ø´Ú©ÛŒ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯
            </CardDescription>
          </CardHeader>
          <CardContent>
            <form onSubmit={handleSubmit} className="space-y-6">
              <motion.div
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ delay: 0.3 }}
              >
                <div className="space-y-2">
                  <label className="text-sm font-medium text-gray-700">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label>
                  <Input
                    type="text"
                    placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"
                    value={username}
                    onChange={(e) => setUsername(e.target.value)}
                    required
                    className="modern-input text-center text-lg py-4"
                  />
                </div>
              </motion.div>
              
              <motion.div
                initial={{ opacity: 0, x: 20 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ delay: 0.4 }}
              >
                <div className="space-y-2">
                  <label className="text-sm font-medium text-gray-700">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                  <Input
                    type="password"
                    placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    required
                    className="modern-input text-center text-lg py-4"
                  />
                </div>
              </motion.div>
              
              <motion.div
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: 0.5 }}
              >
                <Button 
                  type="submit" 
                  className="w-full btn-modern text-lg py-4" 
                  disabled={isLoading}
                >
                  {isLoading ? (
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                      <span>Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...</span>
                    </div>
                  ) : (
                    'ğŸš€ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…'
                  )}
                </Button>
              </motion.div>
              
              <motion.div
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                transition={{ delay: 0.6 }}
                className="text-center text-sm text-gray-500 bg-blue-50 rounded-lg p-3"
              >
                <div className="font-medium">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ:</div>
                <div>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ: <span className="font-bold">admin</span></div>
                <div>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±: <span className="font-bold">admin123</span></div>
              </motion.div>
            </form>
          </CardContent>
        </Card>
        
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ delay: 0.8 }}
          className="text-center text-white mt-6 text-sm"
        >
          Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø§ØµØ·Ù„Ø§Ø­Ø§Øª ØªØ®ØµØµÛŒ Ù¾Ø²Ø´Ú©ÛŒ
        </motion.div>
      </motion.div>
    </div>
  )
}
-----

the codes of file with route : /components/ui/button.tsx :
import * as React from "react";
import { cn } from "@/lib/utils";

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?:
    | "default"
    | "destructive"
    | "outline"
    | "secondary"
    | "ghost"
    | "link";
  size?: "default" | "sm" | "lg" | "icon";
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant = "default", size = "default", ...props }, ref) => {
    return (
      <button
        className={cn(
          "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
          {
            "bg-primary text-primary-foreground hover:bg-primary/90":
              variant === "default",
            "bg-destructive text-destructive-foreground hover:bg-destructive/90":
              variant === "destructive",
            "border border-input bg-background hover:bg-accent hover:text-accent-foreground":
              variant === "outline",
            "bg-secondary text-secondary-foreground hover:bg-secondary/80":
              variant === "secondary",
            "hover:bg-accent hover:text-accent-foreground": variant === "ghost",
            "text-primary underline-offset-4 hover:underline":
              variant === "link",
          },
          {
            "h-10 px-4 py-2": size === "default",
            "h-9 rounded-md px-3": size === "sm",
            "h-11 rounded-md px-8": size === "lg",
            "h-10 w-10": size === "icon",
          },
          className
        )}
        ref={ref}
        {...props}
      />
    );
  }
);
Button.displayName = "Button";

export { Button };

-----

the codes of file with route : /components/ui/card.tsx :
import * as React from "react"
import { cn } from "@/lib/utils"

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-lg border bg-card text-card-foreground shadow-sm",
      className
    )}
    {...props}
  />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLHeadingElement>
>(({ className, ...props }, ref) => (
  <h3
    ref={ref}
    className={cn(
      "text-2xl font-semibold leading-none tracking-tight",
      className
    )}
    {...props}
  />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLParagraphElement>
>(({ className, ...props }, ref) => (
  <p
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }
-----

the codes of file with route : /components/ui/input.tsx :
import * as React from "react"
import { cn } from "@/lib/utils"

export interface InputProps
  extends React.InputHTMLAttributes<HTMLInputElement> {}

const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Input.displayName = "Input"

export { Input }
-----

the codes of file with route : /components/ui/label.tsx :
"use client";

import * as React from "react";
import { cn } from "@/lib/utils";

export interface LabelProps
  extends React.LabelHTMLAttributes<HTMLLabelElement> {}

const Label = React.forwardRef<HTMLLabelElement, LabelProps>(
  ({ className, ...props }, ref) => {
    return (
      <label
        ref={ref}
        className={cn(
          "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",
          className
        )}
        {...props}
      />
    );
  }
);
Label.displayName = "Label";

export { Label };

-----

the codes of file with route : /components/ui/select.tsx :
import * as React from "react"
import { cn } from "@/lib/utils"

interface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {}

const Select = React.forwardRef<HTMLSelectElement, SelectProps>(
  ({ className, children, ...props }, ref) => {
    return (
      <select
        className={cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      >
        {children}
      </select>
    )
  }
)
Select.displayName = "Select"

export { Select }
-----

the codes of file with route : /components/ui/textarea.tsx :
import { cn } from "@/lib/utils"
import React from "react"

export interface TextareaProps
  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}

const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ className, ...props }, ref) => {
    return (
      <textarea
        className={cn(
          "flex min-h-32 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Textarea.displayName = "Textarea"

export { Textarea }
-----

the codes of file with route : /components/ui/toast.tsx :
"use client";

import * as React from "react";
import * as ToastPrimitives from "@radix-ui/react-toast";
import { cva, type VariantProps } from "class-variance-authority";
import { X } from "lucide-react";

import { cn } from "../../lib/utils";

const ToastProvider = ToastPrimitives.Provider;

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      "fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",
      className
    )}
    {...props}
  />
));
ToastViewport.displayName = ToastPrimitives.Viewport.displayName;

const toastVariants = cva(
  "group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
  {
    variants: {
      variant: {
        default: "border bg-background text-foreground",
        destructive:
          "destructive group border-destructive bg-destructive text-destructive-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
);

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &
    VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return (
    <ToastPrimitives.Root
      ref={ref}
      className={cn(toastVariants({ variant }), className)}
      {...props}
    />
  );
});
Toast.displayName = ToastPrimitives.Root.displayName;

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      "inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",
      className
    )}
    {...props}
  />
));
ToastAction.displayName = ToastPrimitives.Action.displayName;

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      "absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",
      className
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
));
ToastClose.displayName = ToastPrimitives.Close.displayName;

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title
    ref={ref}
    className={cn("text-sm font-semibold", className)}
    {...props}
  />
));
ToastTitle.displayName = ToastPrimitives.Title.displayName;

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description
    ref={ref}
    className={cn("text-sm opacity-90", className)}
    {...props}
  />
));
ToastDescription.displayName = ToastPrimitives.Description.displayName;

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;

type ToastActionElement = React.ReactElement<typeof ToastAction>;

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
};
-----

the codes of file with route : /components/ui/toaster.tsx :
"use client";

import { useToast } from "../../hooks/use-toast";
import {
  Toast,
  ToastClose,
  ToastDescription,
  ToastProvider,
  ToastTitle,
  ToastViewport,
} from "./toast";

export function Toaster() {
  const { toasts } = useToast();

  return (
    <ToastProvider>
      {toasts?.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && (
                <ToastDescription>{description}</ToastDescription>
              )}
            </div>
            {action}
            <ToastClose />
          </Toast>
        );
      })}
      <ToastViewport />
    </ToastProvider>
  );
}
-----

the codes of file with route : /hooks/use-toast.ts :
"use client";

// Inspired by react-hot-toast library
import * as React from "react";

import type { ToastActionElement, ToastProps } from "../components/ui/toast";

const TOAST_LIMIT = 1;
const TOAST_REMOVE_DELAY = 1000000;

type ToasterToast = ToastProps & {
  id: string;
  title?: React.ReactNode;
  description?: React.ReactNode;
  action?: ToastActionElement;
};

const actionTypes = {
  ADD_TOAST: "ADD_TOAST",
  UPDATE_TOAST: "UPDATE_TOAST",
  DISMISS_TOAST: "DISMISS_TOAST",
  REMOVE_TOAST: "REMOVE_TOAST",
} as const;

let count = 0;

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER;
  return count.toString();
}

type ActionType = typeof actionTypes;

type Action =
  | {
      type: ActionType["ADD_TOAST"];
      toast: ToasterToast;
    }
  | {
      type: ActionType["UPDATE_TOAST"];
      toast: Partial<ToasterToast>;
    }
  | {
      type: ActionType["DISMISS_TOAST"];
      toastId?: ToasterToast["id"];
    }
  | {
      type: ActionType["REMOVE_TOAST"];
      toastId?: ToasterToast["id"];
    };

interface State {
  toasts: ToasterToast[];
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return;
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId);
    dispatch({
      type: "REMOVE_TOAST",
      toastId: toastId,
    });
  }, TOAST_REMOVE_DELAY);

  toastTimeouts.set(toastId, timeout);
};

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "ADD_TOAST":
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      };

    case "UPDATE_TOAST":
      return {
        ...state,
        toasts: state.toasts?.map((t) =>
          t.id === action.toast.id ? { ...t, ...action.toast } : t
        ),
      };

    case "DISMISS_TOAST": {
      const { toastId } = action;

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId);
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id);
        });
      }

      return {
        ...state,
        toasts: state.toasts?.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t
        ),
      };
    }
    case "REMOVE_TOAST":
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        };
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      };
  }
};

const listeners: Array<(state: State) => void> = [];

let memoryState: State = { toasts: [] };

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action);
  listeners.forEach((listener) => {
    listener(memoryState);
  });
}

type Toast = Omit<ToasterToast, "id">;

function toast({ ...props }: Toast) {
  const id = genId();

  const update = (props: Partial<ToasterToast>) =>
    dispatch({
      type: "UPDATE_TOAST",
      toast: { ...props, id },
    });
  const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id });

  dispatch({
    type: "ADD_TOAST",
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss();
      },
    },
  });

  return {
    id: id,
    dismiss,
    update,
  };
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState);

  React.useEffect(() => {
    listeners.push(setState);
    return () => {
      const index = listeners.indexOf(setState);
      if (index > -1) {
        listeners.splice(index, 1);
      }
    };
  }, [state]);

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: "DISMISS_TOAST", toastId }),
  };
}

export { useToast, toast };
-----

the codes of file with route : /hooks/use-toast.tsx :
"use client";

// Inspired by react-hot-toast library
import * as React from "react";

import type { ToastActionElement, ToastProps } from "../components/ui/toast";

const TOAST_LIMIT = 1;
const TOAST_REMOVE_DELAY = 1000000;

type ToasterToast = ToastProps & {
  id: string;
  title?: React.ReactNode;
  description?: React.ReactNode;
  action?: ToastActionElement;
};

const actionTypes = {
  ADD_TOAST: "ADD_TOAST",
  UPDATE_TOAST: "UPDATE_TOAST",
  DISMISS_TOAST: "DISMISS_TOAST",
  REMOVE_TOAST: "REMOVE_TOAST",
} as const;

let count = 0;

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER;
  return count.toString();
}

type ActionType = typeof actionTypes;

type Action =
  | {
      type: ActionType["ADD_TOAST"];
      toast: ToasterToast;
    }
  | {
      type: ActionType["UPDATE_TOAST"];
      toast: Partial<ToasterToast>;
    }
  | {
      type: ActionType["DISMISS_TOAST"];
      toastId?: ToasterToast["id"];
    }
  | {
      type: ActionType["REMOVE_TOAST"];
      toastId?: ToasterToast["id"];
    };

interface State {
  toasts: ToasterToast[];
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return;
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId);
    dispatch({
      type: "REMOVE_TOAST",
      toastId: toastId,
    });
  }, TOAST_REMOVE_DELAY);

  toastTimeouts.set(toastId, timeout);
};

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "ADD_TOAST":
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      };

    case "UPDATE_TOAST":
      return {
        ...state,
        toasts: state.toasts?.map((t) =>
          t.id === action.toast.id ? { ...t, ...action.toast } : t
        ),
      };

    case "DISMISS_TOAST": {
      const { toastId } = action;

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId);
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id);
        });
      }

      return {
        ...state,
        toasts: state.toasts?.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t
        ),
      };
    }
    case "REMOVE_TOAST":
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        };
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      };
  }
};

const listeners: Array<(state: State) => void> = [];

let memoryState: State = { toasts: [] };

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action);
  listeners.forEach((listener) => {
    listener(memoryState);
  });
}

type Toast = Omit<ToasterToast, "id">;

function toast({ ...props }: Toast) {
  const id = genId();

  const update = (props: Partial<ToasterToast>) =>
    dispatch({
      type: "UPDATE_TOAST",
      toast: { ...props, id },
    });
  const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id });

  dispatch({
    type: "ADD_TOAST",
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss();
      },
    },
  });

  return {
    id: id,
    dismiss,
    update,
  };
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState);

  React.useEffect(() => {
    listeners.push(setState);
    return () => {
      const index = listeners.indexOf(setState);
      if (index > -1) {
        listeners.splice(index, 1);
      }
    };
  }, [state]);

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: "DISMISS_TOAST", toastId }),
  };
}

export { useToast, toast };
-----

the codes of file with route : /lib/auth.ts :
import { jwtVerify, SignJWT, JWTPayload as JoseJWTPayload } from "jose";

const secret = new TextEncoder().encode(
  process.env.JWT_SECRET || "your-secret-key-change-in-production"
);

export interface JWTPayload extends JoseJWTPayload {
  userId: string;
  username: string;
  role: string;
}

export async function signJWT(payload: JWTPayload): Promise<string> {
  return await new SignJWT(payload)
    .setProtectedHeader({ alg: "HS256" })
    .setExpirationTime("7d")
    .sign(secret);
}

export async function verifyJWT(token: string): Promise<JWTPayload> {
  const { payload } = await jwtVerify(token, secret);
  return payload as JWTPayload;
}

-----

the codes of file with route : /lib/prisma.ts :
import { PrismaClient } from "@prisma/client"

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined
}

export const prisma = globalForPrisma.prisma ?? new PrismaClient()

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma
-----

the codes of file with route : /lib/utils.ts :
import clsx, { ClassValue } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

export function generateColorPalette() {
  return [
    '#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6',
    '#06b6d4', '#84cc16', '#f97316', '#ec4899', '#6366f1',
    '#14b8a6', '#f43f5e', '#8b5cf6', '#06b6d4', '#d946ef'
  ]
}
-----

the codes of file with route : /next-env.d.ts :
/// <reference types="next" />
/// <reference types="next/image-types/global" />
import "./.next/types/routes.d.ts";

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.

-----

the codes of file with route : /next.config.ts :
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  reactStrictMode: process.env.NODE_ENV !== "production", // Ø³Ø±Ø¹Øª Ø¨ÛŒØ´ØªØ± Ø¯Ø± build Ùˆ runtime
  // productionBrowserSourceMaps: false, // Ø­Ø°Ù sourcemap Ø¯Ø± production
  compiler: {
    removeConsole: process.env.NODE_ENV === "production", // Ø­Ø°Ù console Ø¯Ø± build
  },
  // @ts-expect-error: eslint option is supported at runtime but missing from types
  eslint: {
    ignoreDuringBuilds: process.env.NODE_ENV === "production", // â›” Ø­Ø°Ù lint Ø¯Ø± build
  },
  typescript: {
    ignoreBuildErrors: process.env.NODE_ENV === "production", // â›” Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ† Ø®Ø·Ø§Ù‡Ø§ÛŒ TS Ø¯Ø± build
  },
};

export default nextConfig;

-----

the codes of file with route : /proxy.ts :
// proxy.ts
import { NextResponse, type NextRequest } from "next/server";
import { verifyJWT } from "./lib/auth";

export default async function proxy(request: NextRequest) {
  const token = request.cookies.get("token")?.value;

  const { pathname } = request.nextUrl;

  // Ø§Ø¬Ø§Ø²Ù‡ Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ Ùˆ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª API
  if (pathname === "/" || pathname.startsWith("/api/auth")) {
    return NextResponse.next();
  }

  // Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ API Ø±Ø§ Ù…Ø­Ø§ÙØ¸Øª Ú©Ù†
  if (pathname.startsWith("/api/")) {
    if (!token) {
      return NextResponse.json(
        { success: false, error: "Unauthorized" },
        { status: 401 }
      );
    }
    try {
      const payload = await verifyJWT(token);

      // Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ù…Ø³ÛŒØ± /api/users
      if (pathname.startsWith("/api/users") && payload.role !== "admin") {
        return NextResponse.json(
          { success: false, error: "Forbidden" },
          { status: 403 }
        );
      }

      return NextResponse.next();
    } catch (error) {
      return NextResponse.json(
        { success: false, error: "Invalid token" },
        { status: 401 }
      );
    }
  }

  // Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† (ØµÙØ­Ø§Øª) Ø±Ø§ Ù…Ø­Ø§ÙØ¸Øª Ú©Ù†
  if (!token) {
    return NextResponse.redirect(new URL("/", request.url));
  }
  try {
    const payload = await verifyJWT(token);

    // Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡ /users
    if (pathname.startsWith("/users") && payload.role !== "admin") {
      return NextResponse.redirect(new URL("/", request.url));
    }

    return NextResponse.next();
  } catch (error) {
    return NextResponse.redirect(new URL("/", request.url));
  }
}

// Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ù‚Ø±Ø§Ø± Ø§Ø³Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ú¯ÛŒØ±Ù†Ø¯
export const config = {
  matcher: [
    "/terms/:path*",
    "/phrases/:path*",
    "/categories/:path*",
    "/users/:path*",
    "/api/:path*",
  ],
};

-----

the codes of file with route : /scripts/seed.ts :
import { PrismaClient } from '@prisma/client'
import bcrypt from 'bcryptjs'

const prisma = new PrismaClient()

async function main() {
  // Create admin user
  const hashedPassword = await bcrypt.hash('admin123', 12)
  
  const admin = await prisma.user.upsert({
    where: { username: 'admin' },
    update: {},
    create: {
      username: 'admin',
      email: 'admin@medicalapp.com',
      password: hashedPassword,
      role: 'admin'
    }
  })

  console.log('Admin user created:', admin.username)

  // Create default categories with error handling
  const categoriesData = [
    {
      name: 'Cardiology',
      description: 'Heart and circulatory system',
      color: '#dc2626',
      createdBy: admin.id
    },
    {
      name: 'Neurology',
      description: 'Nervous system and brain',
      color: '#2563eb',
      createdBy: admin.id
    },
    {
      name: 'Gastroenterology',
      description: 'Digestive system',
      color: '#16a34a',
      createdBy: admin.id
    },
    {
      name: 'Orthopedics',
      description: 'Musculoskeletal system',
      color: '#ea580c',
      createdBy: admin.id
    },
    {
      name: 'Pediatrics',
      description: 'Medical care for children',
      color: '#9333ea',
      createdBy: admin.id
    },
    {
      name: 'Dermatology',
      description: 'Skin and its diseases',
      color: '#ca8a04',
      createdBy: admin.id
    }
  ]

  console.log('Creating categories...')
  
  for (const categoryData of categoriesData) {
    try {
      // First try to find if category exists
      const existingCategory = await prisma.category.findFirst({
        where: { name: categoryData.name }
      })

      if (existingCategory) {
        // Update existing category
        await prisma.category.update({
          where: { id: existingCategory.id },
          data: {
            description: categoryData.description,
            color: categoryData.color
          }
        })
        console.log(`âœ… Category updated: ${categoryData.name}`)
      } else {
        // Create new category
        await prisma.category.create({
          data: categoryData
        })
        console.log(`âœ… Category created: ${categoryData.name}`)
      }
    } catch (error) {
      console.log(`âŒ Error with category ${categoryData.name}:`, (error as any).message)
    }
  }

  // Create sample medical terms with error handling
  console.log('Creating medical terms...')
  
  const medicalTermsData = [
    {
      term: 'Hypertension',
      meaning: 'High blood pressure',
      pronunciation: 'haÉª.pÉ™rËˆten.ÊƒÉ™n',
      createdBy: admin.id
    },
    {
      term: 'Tachycardia',
      meaning: 'Abnormally rapid heart rate',
      pronunciation: 'tÃ¦k.ÉªËˆkÉ‘Ër.di.É™',
      createdBy: admin.id
    },
    {
      term: 'Cerebrovascular',
      meaning: 'Relating to the brain and its blood vessels',
      pronunciation: 'sÉ›r.Éª.broÊŠËˆvÃ¦s.kjÉ™.lÉ™r',
      createdBy: admin.id
    },
    {
      term: 'Arthritis',
      meaning: 'Inflammation of joints',
      pronunciation: 'É‘ËrËˆÎ¸raÉª.tÉªs',
      createdBy: admin.id
    },
    {
      term: 'Diabetes',
      meaning: 'Metabolic disorder characterized by high blood sugar',
      pronunciation: 'ËŒdaÉª.É™ËˆbiË.tiËz',
      createdBy: admin.id
    },
    {
      term: 'Pneumonia',
      meaning: 'Inflammation of the lungs',
      pronunciation: 'nuËËˆmoÊŠ.njÉ™',
      createdBy: admin.id
    }
  ]

  for (const termData of medicalTermsData) {
    try {
      const existingTerm = await prisma.medicalTerm.findFirst({
        where: { term: termData.term }
      })

      if (existingTerm) {
        await prisma.medicalTerm.update({
          where: { id: existingTerm.id },
          data: {
            meaning: termData.meaning,
            pronunciation: termData.pronunciation
          }
        })
        console.log(`âœ… Medical term updated: ${termData.term}`)
      } else {
        await prisma.medicalTerm.create({
          data: termData
        })
        console.log(`âœ… Medical term created: ${termData.term}`)
      }
    } catch (error) {
      console.log(`âŒ Error with medical term ${termData.term}:`, (error as any).message)
    }
  }

  // Create sample medical phrases with error handling
  console.log('Creating medical phrases...')
  
  const medicalPhrasesData = [
    {
      phrase: 'MI',
      explanation: 'Myocardial Infarction - Heart attack',
      createdBy: admin.id
    },
    {
      phrase: 'CVA',
      explanation: 'Cerebrovascular Accident - Stroke',
      createdBy: admin.id
    },
    {
      phrase: 'GERD',
      explanation: 'Gastroesophageal Reflux Disease',
      createdBy: admin.id
    },
    {
      phrase: 'COPD',
      explanation: 'Chronic Obstructive Pulmonary Disease',
      createdBy: admin.id
    },
    {
      phrase: 'UTI',
      explanation: 'Urinary Tract Infection',
      createdBy: admin.id
    },
    {
      phrase: 'AED',
      explanation: 'Automated External Defibrillator',
      createdBy: admin.id
    }
  ]

  for (const phraseData of medicalPhrasesData) {
    try {
      const existingPhrase = await prisma.medicalPhrase.findFirst({
        where: { phrase: phraseData.phrase }
      })

      if (existingPhrase) {
        await prisma.medicalPhrase.update({
          where: { id: existingPhrase.id },
          data: {
            explanation: phraseData.explanation
          }
        })
        console.log(`âœ… Medical phrase updated: ${phraseData.phrase}`)
      } else {
        await prisma.medicalPhrase.create({
          data: phraseData
        })
        console.log(`âœ… Medical phrase created: ${phraseData.phrase}`)
      }
    } catch (error) {
      console.log(`âŒ Error with medical phrase ${phraseData.phrase}:`, (error as any).message)
    }
  }

  // Create some sample flashcards
  console.log('Creating sample flashcards...')
  
  const sampleTerms = await prisma.medicalTerm.findMany({ take: 3 })
  const samplePhrases = await prisma.medicalPhrase.findMany({ take: 2 })

  const flashcardsData = [
    {
      type: 'term',
      front: 'Hypertension',
      back: 'High blood pressure',
      medicalTermId: sampleTerms[0]?.id,
      createdBy: admin.id
    },
    {
      type: 'term',
      front: 'Tachycardia',
      back: 'Abnormally rapid heart rate',
      medicalTermId: sampleTerms[1]?.id,
      createdBy: admin.id
    },
    {
      type: 'phrase',
      front: 'MI',
      back: 'Myocardial Infarction - Heart attack',
      medicalPhraseId: samplePhrases[0]?.id,
      createdBy: admin.id
    },
    {
      type: 'custom',
      front: 'Normal blood pressure range',
      back: '120/80 mmHg or lower',
      createdBy: admin.id
    }
  ]

  for (const flashcardData of flashcardsData) {
    try {
      // Check if flashcard already exists
      let existingFlashcard;
      
      // if (flashcardData.medicalTermId) {
      //   existingFlashcard = await prisma.flashcard.findFirst({
      //     where: { medicalTermId: flashcardData.medicalTermId }
      //   })
      // } else if (flashcardData.medicalPhraseId) {
      //   existingFlashcard = await prisma.flashcard.findFirst({
      //     where: { medicalPhraseId: flashcardData.medicalPhraseId }
      //   })
      // } else {
      //   existingFlashcard = await prisma.flashcard.findFirst({
      //     where: { 
      //       front: flashcardData.front,
      //       type: 'custom'
      //     }
      //   })
      // }

      // if (existingFlashcard) {
      //   await prisma.flashcard.update({
      //     where: { id: existingFlashcard.id },
      //     data: flashcardData
      //   })
      //   console.log(`âœ… Flashcard updated: ${flashcardData.front}`)
      // } else {
      //   await prisma.flashcard.create({
      //     data: flashcardData
      //   })
      //   console.log(`âœ… Flashcard created: ${flashcardData.front}`)
      // }
    } catch (error) {
      console.log(`âŒ Error with flashcard ${flashcardData.front}:`, (error as any).message)
    }
  }

  console.log('ğŸ‰ Database seeded successfully!')
  console.log('ğŸ“Š Summary:')
  console.log(`   ğŸ‘¤ Admin user: ${admin.username}`)
  console.log(`   ğŸ“ Categories: ${categoriesData?.length}`)
  console.log(`   ğŸ“– Medical terms: ${medicalTermsData?.length}`)
  console.log(`   ğŸ’¬ Medical phrases: ${medicalPhrasesData?.length}`)
  console.log(`   ğŸƒ Flashcards: ${flashcardsData?.length}`)
}

main()
  .catch((e) => {
    console.error('âŒ Seeding failed:', e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
-----

the codes of file with route : /types/index.ts :
export interface User {
  id: string
  username: string
  email: string
  role: 'admin' | 'user'
  createdAt: Date
}

export interface MedicalTerm {
  id: string
  term: string
  meaning: string
  pronunciation?: string
  categories: Category[]
  createdAt: Date
  updatedAt: Date
  createdBy: string
}

export interface MedicalPhrase {
  id: string
  phrase: string
  explanation: string
  categories: Category[]
  createdAt: Date
  updatedAt: Date
  createdBy: string
}

export interface Category {
  id: string
  name: string
  description?: string
  color: string
  createdAt: Date
  updatedAt: Date
  createdBy: string
}

export interface ApiResponse<T = any> {
  success: boolean
  data?: T
  error?: string
  message?: string
}
-----
